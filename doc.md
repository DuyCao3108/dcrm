[[_TOC_]]

# [I. Overview](/2.-Local-Datamart)

CRM LDM is not including behavior data from digital. Digital documentation can be found in this [link](/4.-Global-Mobile-App). CRM Local Datamart (LDM) contain all basic information to support CRM daily task:
- They help to monitoring full flow of CRM selling process for all Product (POS/Cash/Card/HPL). From Offer Creation => Communications => Scoring (BOD0) => Application
- Beside that the LDM also help to monitor Operation process from different selling channels such as TLS/SA/Digital
- For other department CRM LDM can be access under the View will be in schema **DM_CRM_REP**. To access to this schema please raise **Service Request** to get the role **DM_CRM_REP_SELECT** 
- For CRM BI Analyst we have access to both View and Table. View will be under Schema **DM_CRM_REP** and table will be under Schema **DM_CRM**
- LDM is updated daily around 8.AM by Local DWH team. Any adjustment to LDM need to create [Configuration CBL](https://jira.homecredit.net/jira/browse/CBL-21033) and assign to LDWH team for development
- LDM updating process monitoring can be found in [CRM Apps](https://app.powerbi.com/groups/me/apps/e32e5999-2ca5-4ab1-bb12-47dfa84f7e6c/reports/e6a28c7f-c842-47c2-a46b-a77d033149d6?experience=power-bi&clientSideAuth=0)
- List of tables as below:

**Table list:**
Since many report in CRM is using old table name so CRM create a view in AP_CRM to rename columns and adjust defaulted value to Null value to reduce work load on adjusting report when switching to LDM
| <font color="black">#</font> | <font color="black">Schema</font> | <font color="black">Table Name</font> | <font color="black">View in AP_CRM</font> | <font color="black">Updating Type</font> | <font color="black">Description</font>                                                                       | <font color="black">What is One Row</font>                                 | <font color="black">History</font> | <font color="black">PIC</font> | <font color="black">Backup PIC</font> |
|-----------------------------:|-----------------------------------|---------------------------------------|-------------------------------------------|------------------------------------------|--------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------|------------------------------------|--------------------------------|---------------------------------------|
| 1                            | DM_CRM                            | FT_CRM_CLIENT_INFO                    | VW_TB_CRM_CLIENT_INFO                     | Incremental                              | Contain Client's information at time of BOD1 Application                                                     | One row is One Application                                                 | Full                               | linh.letn3                     |                       |
| 2                            | DM_CRM                            | FT_CRM_OFFER                          | VW_TB_CRM_OFFER                           | Incremental                              | Contain Scoring/Product Offer create for all Product (POS/Cash/Card/HPL)                                     | One row is One Offer                                                       | 36 M                               | chinh.trantk                   | quynh.caolp1                         |
| 3                            | DM_CRM                            | FT_CRM_ORBP                           | VW_TB_CRM_ORBP                            | Incremental                              | Contain BOD0 Information from Vector like BOD0 channel, Result of BOD0, which Product BOD0 was recalculate   | One row is One Combination of BOD0 and Product Type which was recalculated | 36 M                               | thinh.tranlt                   | quynh.caolp1                          |
| 4                            | DM_CRM                            | FT_CRM_APPLICATION                    | VW_TB_CRM_APPL                            | Incremental                              | Contain Application's information like Application Chanel, Datetime when Application change the status, etc. | One row is One Application                                                 | Full                               | chinh.trantk                   | linh.letn3                            |
| 5                            | DM_CRM                            | FT_CRM_APPL_2_OFFER                   | VW_TB_CRM_APPL_2_OFFER                    | Incremental                              | Connection between Application - Product Offer - BOD0 - Scoring Offer                                        | One row is One Application                                                 | 36 M                               | huong.truongtg1                | quynh.caolp1                          |
| 6                            | DM_CRM                            | FT_CRM_CALL                           | VW_TB_CRM_CALL                            | Incremental                              | TLS Calls Inbound to TLS line and Outbound which is successfully dialed by Genesys                           | One row is One Call Step                                                   | 13 M                               | thao.phamtp6                   | quynh.caolp1                          |
| 7                            | DM_CRM                            | FT_DAILY_TLS_OPERATOR_STATUS          | VW_TB_CRM_TLS_OPERATOR_STATUS_DAILY       | Incremental                              | TLS Operators Status tracking like Login, Break, Ready/Not Ready, ACW, etc.                                  | One row is One Operator                                                    | 13 M                               | thao.phamtp6                   | quynh.caolp1                          |
| 8                            | DM_CRM                            | FT_CRM_RISK_FIGURE                    | VW_TB_CRM_RISK_FIGURE                     | Incremental                              | Tracking DPD of Contracts (FPD, SPD, TPD, FSTPD after 5, 10, 30, 60, 90 days)                                | One row is One Contract                                                    | 15 M                               | thao.nguyend                 | chinh.trantk1                         |
| 9                            | DM_CRM                            | FT_CRM_INSURANCE                      | VW_TB_CRM_INSURANCE                       | Incremental                              | Tracking which Insurance Service that Contract has (PPI, CI, HOCO)                                           | One row is One Contract with Insurance Service                             | 15 M                               | thao.nguyend                  | chinh.trantk1                         |
| 10                           | DM_CRM                            | FT_CLIENT_REFERENCE_INFO              |                                           | Incremental                              |                                                                                                              | One row is One Application                                                 | 13 M                               | huong.truongtg1                |                                       |

# [II. Table Structure & Description](/2.-Local-Datamart)
## [1. FT&#95;CRM&#95;CLIENT&#95;INFO](/2.-Local-Datamart)
<details>
  <summary>Table Description</summary>

The Table contain client info at time of Application (BOD1) was made

| <font color="black">#</font> | <font color="black">Table Field Name</font> | <font color="black">CRM View Field Name</font> | <font color="black">Data Type</font> | <font color="black">Field Description</font>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|-----------------------------:|---------------------------------------------|------------------------------------------------|--------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1                            | DATE_EFFECTIVE                              | DATE_EFFECTIVE                                 | DATE                                 | Date (and time) when record was updated for the last time                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 2                            | SKP_CLIENT                                  | SKP_CLIENT                                     | INTEGER                              | Primary key of DCT_Client                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 3                            | ID_CUID                                     | ID_CUID                                        | INTEGER                              | Client universal ID                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 4                            | SKP_CREDIT_CASE                             | SKP_CREDIT_CASE                                | INTEGER                              | Foreign key identifier to Credit Case dimension table - Unique key                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 5                            | SKP_CREDIT_TYPE                             | SKP_CREDIT_TYPE                                | INTEGER                              | Type of credit case This also represents type of related existing application or contract                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 6                            | DATE_DECISION                               | DATE_DECISION                                  | DATE                                 | Date decision - Partitioning key                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 7                            | CODE_GENDER                                 | CODE_GENDER                                    | VARCHAR2(3)                          | Gender code: M, F, XNA                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 8                            | DATE_BIRTH                                  |                                                | DATE                                 | Date of birth                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 9                            | NAME_FAMILY_STATUS                          | NAME_FAMILY_STATUS                             | VARCHAR2(20)                         | Family status                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 10                           | CNT_CHILDREN                                | CNT_CHILDREN                                   | INTEGER                              | Number of children - Not correct for Existing client from March 2019 due to changes in underwriting process                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 11                           | CNT_PERSON_DEPENDENT                        | CNT_PERSON_DEPENDENT                           | INTEGER                              | Number of dependents                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| 12                           | CODE_EDUCATION_TYPE                         | CODE_EDUCATION_TYPE                            | VARCHAR2(20)                         | Education type code                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 13                           | NAME_EDUCATION_TYPE                         | NAME_EDUCATION_TYPE                            | VARCHAR2(30)                         | Education type                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 14                           | CODE_INCOME_TYPE                            | CODE_INCOME_TYPE                               | VARCHAR2(20)                         | Income type code                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 15                           | CODE_PROFESSION                             | CODE_PROFESSION                                | VARCHAR2(20)                         | Profession code                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 16                           | NAME_EMPLOYER                               | NAME_EMPLOYER                                  | VARCHAR2(100)                        | Name of employer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 17                           | DATE_EMPLOYED_FROM                          | DATE_EMPLOYED_FROM                             | DATE                                 | Date since the client is employed                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 18                           | AMT_INCOME_MAIN                             | AMT_INCOME_MAIN                                | NUMBER                               | Amount of main income                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 19                           | AMT_INCOME_OTHER                            | AMT_INCOME_OTHER                               | NUMBER                               | Other sources of client income                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 20                           | CODE_SALARY_FREQUENCY                       | CODE_SALARY_FREQUENCY                          | VARCHAR2(10)                         | Frequency of the regular salary                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 21                           | NAME_CONTACT_REGION                         | NAME_CONTACT_REGION                            | VARCHAR2(20)                         | Contact region                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 22                           | NAME_CONTACT_REGION_TRUNC                   | NAME_CONTACT_REGION_TRUNC                      | VARCHAR2(20)                         | Contact region with EN characters only and without spaces                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 23                           | NAME_CONTACT_DISTRICT                       | NAME_CONTACT_DISTRICT                          | VARCHAR2(30)                         | Contact district                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 24                           | NAME_CONTACT_TOWN                           | NAME_CONTACT_TOWN                              | VARCHAR2(50)                         | Contact town                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 25                           | NAME_CONTACT_STREET                         | NAME_CONTACT_STREET                            | VARCHAR2(50)                         | Contact street                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 26                           | NAME_PERMANENT_REGION                       | NAME_PERMANENT_REGION                          | VARCHAR2(20)                         | Permanent region                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 27                           | NAME_PERMANENT_REGION_TRUNC                 | NAME_PERMANENT_REGION_TRUNC                    | VARCHAR2(20)                         | Permanent region with EN characters only and without spaces                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 28                           | NAME_PERMANENT_DISTRICT                     | NAME_PERMANENT_DISTRICT                        | VARCHAR2(30)                         | Permanent district                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 29                           | NAME_PERMANENT_TOWN                         | NAME_PERMANENT_TOWN                            | VARCHAR2(50)                         | Permanent town                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 30                           | NAME_PERMANENT_STREET                       | NAME_PERMANENT_STREET                          | VARCHAR2(50)                         | Permanent street                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 31                           | NAME_CONTACT_REGION_GR                      | NAME_CONTACT_REGION_GR                         | NUMBER                               | Contact region group based on CRM logic (population)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| 32                           | NAME_CONTACT_REGION_GR_NEW                  | NAME_CONTACT_REGION_GR_NEW                     | VARCHAR2(10)                         | Contract region group based on CRM new logic (city and region)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 33                           | NAME_CLI_PRIM_TELCO                         | NAME_CLI_PRIM_TELCO                            | VARCHAR2(15)                         | Client primary phone's telco provider                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 34                           | SKP_REGION_CONTACT                          | SKP_REGION_CONTACT                             | NUMBER                               | Primary key of OWNER_DWH.CLT_REGION                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 35                           | SKP_DISTRICT_CONTACT                        | SKP_DISTRICT_CONTACT                           | NUMBER                               | Primary key of OWNER_DWH.DCT_DISTRICT                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 36                           | SKP_REGION_PERMANENT                        | SKP_REGION_PERMANENT                           | NUMBER                               | Primary key of OWNER_DWH.CLT_REGION                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 37                           | SKP_DISTRICT_PERMANENT                      | SKP_DISTRICT_PERMANENT                         | NUMBER                               | Primary key of OWNER_DWH.DCT_DISTRICT                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 38                           | NUM_CLI_AGE                                 | NUM_CLI_AGE                                    | NUMBER                               | The age of client                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 39                           | CODE_EMAIL_TYPE                             |                                                | CHAR(3)                              | Based on domain name of email: Gmail , Outlook , iCloud , Hotmail , Unverified (Cannot be found or less common)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 40                           | CODE_EMAIL_VERIFIED_STATUS                  |                                                | CHAR(4)                              | Based on how far the emails meet the requirements of syntax validation and email domain validation (for domain part, valid when belong to one of email types without typos) <br/> - Valid email: Satisfy all the conditions => Can be used for marketing <br/> - Valid syntax - Typo domain: Satisfy syntax validation but typo in domain => Domain part needs to be corrected before using <br/> - Invalid syntax: Only domain part is valid => Cannot be used <br/> - Invalid domain: Only syntax is valid => Cannot be used <br/> - Invalid syntax - Invalid domain: Neither of them is valid => Cannot be used |

Index:
| <font color="black">#</font> | <font color="black">Owner</font> | <font color="black">Index Name</font> | <font color="black"> Type</font> | <font color="black">Column</font> |
|-----------------------------:|----------------------------------|---------------------------------------|----------------------------------|-----------------------------------|
| 1                            | DM_CRM                           | PK_FT_CRM_CLIENT_INFO                 | Unique                           | SKP_CREDIT_CASE                   |
| 2                            | DM_CRM                           | IDX_FT_CRM_CLIENT_INFO_01             | Bitmap                           | SKP_CREDIT_TYPE                   |
| 3                            | DM_CRM                           | IDX_FT_CRM_CLIENT_INFO_02             | Normal                           | SKP_CLIENT                        |
| 4                            | DM_CRM                           | IDX_FT_CRM_CLIENT_INFO_04             | Normal                           | ID_CUID                           |

</details>

<details>
  <summary>Logical Mapping</summary>

**Source table in DWH:**

| <font color="black">#</font> | <font color="black">Schema</font> | <font color="black">Table Name</font> | <font color="black">Main Data Extract</font>     |
|-----------------------------:|-----------------------------------|---------------------------------------|--------------------------------------------------|
| 1                            | OWNER_DWH                         | FT_APPLICATION_ADDRESS_TT             | Get Client Permanent and Contact Address         |
| 2                            | OWNER_DWH                         | CLT_REGION                            | Code List Region                                 |
| 3                            | OWNER_DWH                         | DCT_DISTRICT                          | District Info                                    |
| 4                            | OWNER_DWH                         | FT_APPLICATION_CLIENT_TT              | Get Client Name, Gender, Income, Education etc.  |
| 5                            | OWNER_DWH                         | CLT_FAMILY_STATUS                     | Code List Family Status                          |
| 6                            | OWNER_DWH                         | FT_APPLICATION_CONTACT_TT             | Get Client Phone Prefix and check Email Validity |
| 7                            | OWNER_DWH                         | DCT_CREDIT_CASE                       | Get Credit Case Key                              |
| 8                            | OWNER_DWH                         | DCT_CLIENT                            | Get Client ID CUID                               |

**Mapping Diagram:**
There are two step to build/updating the table which is show in one diagram as below:
Step 1: Get client Contact and Permanent address. One row is one client application with their address at the BOD1 application time
Step 2: Summary client info. One row is one Application

![image.png](/.attachments/image-d1f25216-2fcd-43e2-84d8-ed1ff29993db.png)

</details>


## [2. FT&#95;CRM&#95;OFFER](/2.-Local-Datamart)
<details>
  <summary>Table Description</summary>

| <font color="black">#</font> | <font color="black">Table Field Name</font> | <font color="black">CRM View Field Name</font> | <font color="black">Data Type</font> | <font color="black">Field Description</font>                                                                                                                                                                                                                                                                                                                                                            |
|-----------------------------:|---------------------------------------------|------------------------------------------------|--------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1                            | ID_CA                                       | CA_ID                                          | NUMBER(15,0)                         | SKP_STORE_OFFER (DWH key of DC_Store_Offer) - <font color="red">Table Primary key</font>                                                                                                                                                                                                                                                                                                                |
| 2                            | ID_CA_OFF                                   | CA_OFF_ID                                      | VARCHAR2(36)                         | DC_Store_Offer.idSource (Offer ID in OFS)                                                                                                                                                                                                                                                                                                                                                               |
| 3                            | ID_CA_LIM                                   | CA_LIM_ID                                      | VARCHAR2(36)                         | Limit ID in Offer store (PK of table F_Store_Offer_Limit_AD)                                                                                                                                                                                                                                                                                                                                            |
| 4                            | ID_CA_ORIG_OFFER                            | CA_ORIG_OFFER_ID                               | VARCHAR2(36)                         | ID of offer based on which the current offer was created. It works for Product offers which were created as a result of recalculation of Scoring Offer (BOD0) or Instant cash process (automatically after approved POS application)                                                                                                                                                                    |
| 5                            | ID_CA_ORIG_LIMIT                            | CA_ORIG_LIMIT_ID                               | VARCHAR2(36)                         | ID of limit based on which the current offer was created. It works for Product offers which were created as a result of recalculation of Scoring Offer (BOD0) or Instant cash process (automatically after approved POS application)                                                                                                                                                                    |
| 6                            | ID_CUID                                     | ID_CUID                                        | NUMBER(15,0)                         | Client ID                                                                                                                                                                                                                                                                                                                                                                                               |
| 7                            | SKP_CLIENT                                  | SKP_CLIENT                                     | NUMBER(15,0)                         | Client SKP                                                                                                                                                                                                                                                                                                                                                                                              |
| 8                            | CODE_CA_TYPE                                | CA_TYPE                                        | VARCHAR2(10)                         | Campaign type                                                                                                                                                                                                                                                                                                                                                                                           |
| 9                            | TEXT_CA_NAME                                | CA_NAME                                        | VARCHAR2(100)                        | CRM pilot code in OFS                                                                                                                                                                                                                                                                                                                                                                                   |
| 10                           | CODE_CA_OFFER_TYPE                          | CA_OFFER_TYPE_CODE                             | VARCHAR2(30)                         | Offer Type Code in OFS, example : SCORING_OFFER_PR1, SCORING_OFFER_PR2, SCORING_OFFER_PR3, CLX_STANDARD_OFFER, â€¦                                                                                                                                                                                                                                                                                        |
| 11                           | CODE_CA_PROD_PRI_GR                         | CA_PROD_PRI_GR                                 | VARCHAR2(30)                         | Pricing Group which was assigned to offer. Extract from CRM Pilot Code in OFS                                                                                                                                                                                                                                                                                                                           |
| 12                           | DTIME_CA_CREATION                           | CA_CREATION_DTM                                | DATE                                 | Offer (Campaign before SAS) creation datetime                                                                                                                                                                                                                                                                                                                                                           |
| 13                           | DATE_CA_START                               | CA_START_DT                                    | DATE                                 | <font color="red">Partition key</font>. Offer creation date in OFS - For Offer was created before 08.10.2019 in OFS will be convert to 09.10.2019                                                                                                                                                                                                                                                       |
| 14                           | DATE_CA_END                                 | CA_END_DT                                      | DATE                                 | Offer valid to date                                                                                                                                                                                                                                                                                                                                                                                     |
| 15                           | DTIME_CA_DEACTIVATE                         | CA_DEACTIVATE_DTM                              | DATE                                 | Offer deactivation date and time, represents real offer end. It can be different from CA_END_DT for period after SAS                                                                                                                                                                                                                                                                                    |
| 16                           | CODE_CA_STATUS                              | CA_STATUS                                      | VARCHAR2(1)                          | Offer status. A: Active; B: Blocked; D: Deactivated                                                                                                                                                                                                                                                                                                                                                     |
| 17                           | AMT_CA_DUR                                  | CA_DUR                                         | NUMBER(16,0)                         | Campaign duration = offer deactivation date(CA_DEACTIVATE_DTM)/offer valid to date (CA_END_DT) - offer creation date (CA_START_DT)                                                                                                                                                                                                                                                                      |
| 18                           | AMT_CA_LIMIT_OF                             | CA_LIMIT_OF                                    | NUMBER(16,0)                         | Offline Max credit amount for Scoring Offer. Online Max credit amount for Product Offer                                                                                                                                                                                                                                                                                                                 |
| 19                           | AMT_CA_MAXINST_OF                           | CA_MAXINST_OF                                  | NUMBER(16,0)                         | Offline Max instalment amount for Scoring Offer. Online Max instalment amount for Product offer                                                                                                                                                                                                                                                                                                         |
| 20                           | FLAG_CA_F_ORBP                              | CA_F_ORBP                                      | VARCHAR2(20)                         | Flag to determine whether campaign is ORBP or not (Campaign ORBP has (ORBP) in their name; otherwise, it is not ORBP campaign): <br/>- SCORING(ORBP) <br/>- SCORING_NO_OTP(ORBP) for ORBP without needing OTP. Available after 17-March-2020 <br/>- PRODUCT(NOT_ORBP)                                                                                                                                   |
| 21                           | CODE_CA_RBP_OF                              | CA_RBP_OF                                      | VARCHAR2(10)                         | Offline  risk group: RBP 01 --> 07                                                                                                                                                                                                                                                                                                                                                                      |
| 22                           | CODE_CA_SC_DTL                              | CA_SC_DTL                                      | VARCHAR2(15)                         | Detailed segment code from historical table                                                                                                                                                                                                                                                                                                                                                             |
| 23                           | CODE_CA_SC_GR                               | CA_SC_GR                                       | VARCHAR2(15)                         | Segment code group: <br/>- PTO: Client with active cash loan contract or last cash loan contract closed less than 6 months ago <br/>- MFLC_00_02: MFLC= 0 (active contract),1,2 <br/>- MFLC_03: MFLC= [3-12] <br/>- OC2Y: MFLC= [13-24] <br/>- OC3Y: MFLC= [25-36] <br/>- OCYY: MFLC >36 <br/>(PTO- Premium and TOP UP has the highest priority, MFLC-months from last contract closure, OC-Old Client) |
| 24                           | FLAG_CA_F_FANTOM                            | CA_F_FANTOM                                    | VARCHAR2(5)                          | Flag to determine whether campaign strategy type is Early or not                                                                                                                                                                                                                                                                                                                                        |
| 25                           | FLAG_CA_F_NEW_ELI                           | CA_F_NEW_ELI                                   | VARCHAR2(20)                         | Flag to determine the eligible extension done by risk                                                                                                                                                                                                                                                                                                                                                   |
| 26                           | FLAG_CA_F_VALID_PHONE                       | CA_F_VALID_PHONE                               | VARCHAR2(5)                          | Flag of valid phone number on offer creation date. Works from 08.01.2020. Based on CDM.CI_CONTACT_HISTORY_EXT_ELIG.CUSTOM_INFO1                                                                                                                                                                                                                                                                         |
| 27                           | FLAG_CA_F_VALID_DOC                         | CA_F_VALID_DOC                                 | VARCHAR2(5)                          | Flag of valid document on offer creation date. Works from 08.01.2020. Based on CDM.CI_CONTACT_HISTORY_EXT_ELIG.CUSTOM_INFO2                                                                                                                                                                                                                                                                             |
| 28                           | FLAG_CA_F_DNC                               | CA_F_DNC                                       | VARCHAR2(5)                          | Flag of DO NOT CALL at offer creation date. Works from 08.01.2020. Based on CDM.CI_CONTACT_HISTORY_EXT_ELIG.CUSTOM_INFO3                                                                                                                                                                                                                                                                                |
| 29                           | SKP_CREDIT_CASE_CLI                         | CLI_SKP_CREDIT_CASE                            | NUMBER(15,0)                         | Key to TB_CRM_Client_Info.SKP_CREDIT_CASE                                                                                                                                                                                                                                                                                                                                                               |
| 30                           | FLAG_CA_F_MC                                | CA_F_MC                                        | VARCHAR2(5)                          | Flag whether the client is eligible for MC process                                                                                                                                                                                                                                                                                                                                                      |
| 31                           | RATE_CA_CARD_CASH_RATIO                     | CA_CARD_CASH_RATIO                             | NUMBER                               | Ratio between CCX Response Rate and CLX Response Rate , CCX/CLX                                                                                                                                                                                                                                                                                                                                         |
| 32                           | AMT_CA_MFLC                                 | CA_MFLC                                        | NUMBER                               | MFLC calculated field for MFLC and OC segment                                                                                                                                                                                                                                                                                                                                                           |
| 33                           | CODE_CA_BLAZE_LIMIT_PILOT                   | CA_BLAZE_LIMIT_PILOT                           | VARCHAR2(50)                         | Limit pilot code from offline blaze at Offer creation moment                                                                                                                                                                                                                                                                                                                                            |

Index:

| <font color="black">#</font> | <font color="black">Owner</font> | <font color="black">Index Name</font> | <font color="black"> Type</font> | <font color="black">Column</font> |
|-----------------------------:|----------------------------------|---------------------------------------|----------------------------------|-----------------------------------|
| 1                            | DM_CRM                           | PK_FT_CRM_OFFER                       | Unique                           | ID_CA_OFF                         |
| 2                            | DM_CRM                           | IDX_CRM_OFFER_CA_ID                   | Normal                           | ID_CA                             |
| 3                            | DM_CRM                           | IDX_CRM_OFFER_ID_CUID                 | Normal                           | ID_CUID                           |
| 4                            | DM_CRM                           | IDX_CRM_OFFER_SKP_CLIENT              | Normal                           | SKP_CLIENT                        |

</details>

<details>
  <summary>Logical Mapping</summary>

**Source table in DWH:**

| <font color="black">#</font> | <font color="black">Schema</font> | <font color="black">Table Name</font>                       | <font color="black">Main Data Extract</font>                                                                                                                                                               |
|-----------------------------:|-----------------------------------|-------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1                            | OWNER_DWH                         | DC_STORE_OFFER                                              | Get Scoring/Product Offer information (CRM pilot code, Offer type, Creation Date, Offer Status, Amount Offer)                                                                                              |
| 2                            | OWNER_DWH                         | F_STORE_OFFER_LIMIT_AD                                      | Get Scoring/Online Limit information (Online Risk Grade, Limit Pilot Code, Limit type)                                                                                                                     |
| 3                            | OWNER_DWH                         | F_SAS_CLIENT_CONTACT_EXT_TT                                 | Get Segment, Risk Grade Offline, Valid Phone, Valid Doc, DNC, MC at time of Scoring Offer Create                                                                                                           |
| 4                            | OWNER_DWH                         | F_CREDIT_CASE_AD                                            | Calculate Months from Last Application closed                                                                                                                                                              |
| 5                            | DM_CRM_REP                        | F_CRM_CLIENT_INFO                                           | Get closest application of client before Offer creation time                                                                                                                                               |
| 6                            | DM_OFFLINE_SCORING_ENGINE         | F_OFFSCORE_CRIT_HIST_OUT_TT <br/> F_OFFSCORE_CREDIT_HIST_TT | Get data from Offline Blaze, Information of Limit is changing over time  we are not able to track what is the limit info at time of Offer create so using Offline Blaze is the work around solution for it |

**Mapping Diagram:**

</details>

## [3. FT&#95;CRM&#95;ORBP](/2.-Local-Datamart)
<details>
  <summary>Table Description</summary>

Table information: 
- One row is one recalculation with input and output of this recalculation (also known as BOD0 step). 
- This step is the input for Offer Store when creating Online/Master limit
- 1 recalculation can have multiple input info and also multiple output info (based on limits client has, based on products Underwriting (UW) want to score client, based on additional information UW would like to record)


Table Description

| <font color="black">#</font> | <font color="black">Table Field Name</font> | <font color="black">CRM View Field Name</font> | <font color="black">Data Type</font> | <font color="black">Field Description</font>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|-----------------------------:|---------------------------------------------|------------------------------------------------|--------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                              |                                             |                                                |                                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 1                            | SKP_PROC_INSERTED                           |                                                |                                      | Key of the process which inserted the record.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 2                            | SKP_PROC_UPDATED                            |                                                |                                      | Key of the process which last updated the record.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 3                            | DTIME_INSERTED                              |                                                |                                      | Date when record was created.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 4                            | DTIME_UPDATED                               |                                                |                                      | Date (and time) when record was updated for the last time.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 5                            | DATE_EFFECTIVE                              |                                                |                                      | Date (and time) when record was updated for the last time.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 6                            | SKF_APPROVAL_PROCESS_HEAD                   | SKF_APPROVAL_PROCESS_HEAD                      | SKF_APPROVAL_PROCESS_HEAD            | Key connection to VECTOR table                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 7                            | NUM_GROUP_POSITION_1                        | NUM_GROUP_POSITION_1                           | NUM_GROUP_POSITION_1                 | NUM_GROUP_POSITION_1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 8                            | DTIME_APL_BOD0                              | APL_BOD0_DTM                                   | APL_BOD0_DTM                         | <font color="red">Partition key</font>. Recalculation (BOD0) date and time                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 9                            | ID_CUID                                     | ID_CUID                                        | ID_CUID                              | Client ID                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 10                           | ID_CA                                       | CA_ID                                          | CA_ID                                | Input for BOD0 specifying if client is eligible for X-Sell when BOD0 started.<br/>Before SAS: Campaign ID.<br/> After SAS go live (08.10.2019): LIMIT_ID for client having limit in OFS (eligible), null for instant cash new clients or for existing non-eligible clients                                                                                                                                                                                                                                                                             |
| 11                           | TEXT_CA_LIMIT_SUB_TYPE                      | CA_LIMIT_SUB_TYPE                              | CA_LIMIT_SUB_TYPE                    | Input for BOD0 specifying eligibility type (Scoring or Product limit). Valid only after SAS (08.10.2019)<br/>Before SAS: Blank <br/>After SAS: Has value only if client is eligible before scoring, values are ONLINE, SCORING, SCORING_Small.                                                                                                                                                                                                                                                                                                         |
| 12                           | ID_CA_OFF                                   | CA_OFF_ID                                      | CA_OFF_ID                            | Offer ID (Input for BOD0). Before 09.10.2019 equals to CA_ID_ID_CUID, from 09.10.2019 equals to DC_Store_Offer.idSource (Offer ID in OFS).                                                                                                                                                                                                                                                                                                                                                                                                             |
| 13                           | DATE_APL_BOD0_VALID_FROM                    | APL_BOD0_VALID_FROM_DT                         | APL_BOD0_VALID_FROM_DT               | Date from when offer generated from oRBP process is valid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 14                           | DATE_APL_BOD0_VALID_TO                      | APL_BOD0_VALID_TO_DT                           | APL_BOD0_VALID_TO_DT                 | Date from when offer generated from ORBP process is not valid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 15                           | NAME_APL_BOD0_OFFER                         | APL_BOD0_OFFER_NAME                            | APL_BOD0_OFFER_NAME                  | Output of oRBP specifying product type of generated offer.<br/>Before SAS: Offer name after scoring process, blank if there is no offer after scoring process<br/>After SAS (08.10.2019): Artificial field based on CODE_LIMIT_PILOT and CODE_TYPE_LIMIT (corresponds to LIMITS.CODE_LIMIT_PILOT and  LIMITS.CODE_TYPE_LIMIT ), blank if there is no generated offer. %CLX% - cash loan; %CCX% - credit card; CCW, %SCW% - shopping card; %ATM% - cash card                                                                                            |
| 16                           | MAX_APL_BOD0_LIMIT                          | APL_BOD0_MAX_LIMIT                             | APL_BOD0_MAX_LIMIT                   | Type of Online Limit which generated after Approved BOD0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| 17                           | MAX_APL_BOD0_ANNUITY                        | APL_BOD0_MAX_ANNUITY                           | APL_BOD0_MAX_ANNUITY                 | Online max annuity                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 18                           | TEXT_APL_BOD0_RBP                           | APL_BOD0_RBP                                   | APL_BOD0_RBP                         | Online Risk group                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 19                           | NUM_APL_F_BOD0_0MOB                         | APL_F_BOD0_0MOB                                | APL_F_BOD0_0MOB                      | To-Be Removed. Flag of Early MOB eligibility (special risk strategy) <br/> Equal 1: if online risk group contains 'Early' inside <br/> Equal 0: In other cases                                                                                                                                                                                                                                                                                                                                                                                         |
| 20                           | TEXT_APL_BOD0_TRIGGER_TYPE                  | APL_BOD0_TRIGGER_TYPE                          | APL_BOD0_TRIGGER_TYPE                | Artificial field defining how process oRBP was triggered (valid after 2019-04-25) <br/> AUTO: Automatically triggered <br/> MANUAL: People involved <br/>MOBILE: Mobile application                                                                                                                                                                                                                                                                                                                                                                    |
| 21                           | TEXT_APL_F_PRI_CAT_SHIFT                    | APL_F_PRI_CAT_SHIFT                            | APL_F_PRI_CAT_SHIFT                  | To-Be Removed. Pilot shift (01.07.19-11.12.19) has 2 period. <br/> (01.07.19-16.09.19) TG1: client in Online RBP (1,2,3) received offered with interest rate for group RBP (2,3,4) respectively. CG1: client in Online RBP (1,2,3) received offer with normal interest rate. <br/> (17.06.19-11.12.19)  TG2: client with Online RBP (1-5) received offer with interest rate for groups (2-6) respectively. CG2: client with Online RBP (1-5) received offer with normal interest rate. All other cases are blank.                                      |
| 22                           | NUM_APL_F_BOD0_FANTOMAS                     | APL_F_BOD0_FANTOMAS                            | APL_F_BOD0_FANTOMAS                  | To-Be Removed. Flag defining if client belongs to Fantomas pilot. <br/> 1 - if client should be rejected due to BOD01/BOD2 Hard Checks, but because of Fantomas pilot, they still was approved in scoring process. <br/> 0 - in all other cases                                                                                                                                                                                                                                                                                                        |
| 23                           | TEXT_APL_BOD0_CHANNEL                       | APL_BOD0_CHANNEL                               | APL_BOD0_CHANNEL                     | Defines the Channel by which oRBP triggered. <br/> Icash: auto trigger oRBP after POS approved/ cancel after approved <br/> SECOND_XSELL: auto trigger oRBP after X-Sell application is approved/ cancel after approved. We do not have this channel after SAS go live 09.10.2019 <br/> MOB_APP: shop code trigger oRBP is mobile app virtual shop <br/> ACL_VIRTUAL: shop code trigger oRBP is ACL virtual shop <br/> TLS: shop code trigger oRBP is TLS virtual shop <br/> SA: shop code trigger oRBP has brand name CD/TW/XNA <br/> OTHER: the rest |
| 24                           | TEXT_APL_BOD0_HC_RES                        | APL_BOD0_HC_RES                                | APL_BOD0_HC_RES                      | Specifies if client was hit by Risk hard checks (HC) or not. Applicable only from SAS go live date 09.10.2019. Before SAS it is empty. <br/> Values: A - no hit by HC, R - hit by HC, F - process was not finished.                                                                                                                                                                                                                                                                                                                                    |
| 25                           | NUM_APL_F_BOD0_LIMIT_ELI                    | APL_F_BOD0_LIMIT_ELI                           | APL_F_BOD0_LIMIT_ELI                 | Specifies if online limit of client is enough for them to have offer. <br/> 0: online limit is not enough for client to have offer, 1: client still eligible, null: if scoring without OTP                                                                                                                                                                                                                                                                                                                                                             |
| 26                           | NUM_APL_F_BOD0_OTP                          | APL_F_BOD0_OTP                                 | APL_F_BOD0_OTP                       | Specifies how oRBP process had happened regarding OTP. <br/> 0: scoring without OTP; 1: scoring with OTP; 2: scoring with fake OTP (from NO-OTP pilot)                                                                                                                                                                                                                                                                                                                                                                                                 |
| 27                           | NUM_APL_F_BOD0_APPROVED                     | APL_F_BOD0_APPROVED                            | APL_F_BOD0_APPROVED                  | Define if client has approved after scoring process. <br/> 1: if BOD0 was approved; 0: If BOD0 was rejected                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 28                           | TEXT_APL_BOD0_INST_PROD                     | APL_BOD0_INST_PROD                             | APL_BOD0_INST_PROD                   | List of product offers appeared in case of automatic BOD0 after POS (approved or cancelled after approval). Empty for all other BOD0 <br/> Values: CLX, SCW+CLX, SCW                                                                                                                                                                                                                                                                                                                                                                                   |
| 29                           | NUM_APL_F_BOD0_FLAT_SUPER_LOW               | APL_F_BOD0_FLAT_SUPER_LOW                      | APL_F_BOD0_FLAT_SUPER_LOW            | To-Be Removed Specifies if client received Product offer with Super low Interest Rate. Applicable only to A+ online risk group after 24.03.2020                                                                                                                                                                                                                                                                                                                                                                                                        |
| 30                           | TEXT_APL_BOD0_OFFER_TYPE                    | APL_BOD0_OFFER_TYPE                            | APL_BOD0_OFFER_TYPE                  | Offer Type of generated Offer: CLX: Cash Loan X-Sell, including Cash Box and Big Box; CLX_IC - Offer Instant Cash; CCX - Offer CCX; CC_SC - Offer Shopping Card; CC_CC - Offer Cash Card, ACLX: ACLX starting from 12-2020, ACL: ACL 0BOD starting from 05-2021                                                                                                                                                                                                                                                                                        |
| 31                           | TEXT_APL_BOD0_TRIGGER_SOURCE                | APL_BOD0_TRIGGER_SOURCE                        | APL_BOD0_TRIGGER_SOURCE              | Offer recalculation type / Recalculation source. It is more detailed split of APL_BOD0_TRIGGER_TYPE <br/> APPLICATION_APPROVED, APPLICATION_CANCELLED, BSL, CAPP, CLIENT_DETAIL, CONTRACT_CANCELLED, CONTRACT_DETAIL, IMPORTED_BY_RISK, PRODUCT_CALCULATOR                                                                                                                                                                                                                                                                                             |
| 32                           | TEXT_APL_BOD0_ACTOR                         | APL_BOD0_ACTOR                                 | APL_BOD0_ACTOR                       | Code of salesroom where oRBP was triggered. If it is NULL, then the BOD0 was triggered automatically                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 33                           | SKP_SCORING_APPLICATION                     | SKP_SCORING_APPLICATION                        | SKP_SCORING_APPLICATION              | Key link between BOD0 and Online Limit                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 34                           | TEXT_APL_BOD0_LIMIT_TYPE                    | APL_BOD0_LIMIT_TYPE                            | APL_BOD0_LIMIT_TYPE                  | To be removed. Replace by using Text Output Limit Type. Key link between BOD0 and Online Limit                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 35                           | ID_LIMIT_BULK                               | ID_LIMIT_BULK                                  | ID_LIMIT_BULK                        | Request ID send from PST to OFS.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 36                           | TEXT_APL_CONTRACT_NUM                       | APL_CONTRACT_NUM                               | APL_CONTRACT_NUM                     | Text contract number which trigger auto recalculation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 37                           | NUM_LIMIT_SCORE_OFFLINE                     | LIMIT_SCORE_OFFLINE                            | LIMIT_SCORE_OFFLINE                  | Offline score of Offer at time of recalculation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 38                           | NAME_APL_BOD0_STRATEGY                      | APL_BOD0_STRATEGY_NAME                         | APL_BOD0_STRATEGY_NAME               | Define ACLX BOD0 go through BOD0 Flow                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 39                           | NAME_POST_FINAL_RISKGROUP                   | POST_FINAL_RISKGROUP                           | POST_FINAL_RISKGROUP                 | Define ACL WithDoc and NoDoc is Approved or Not , '1' is Approved, '0' is Rejected, like '2%' is Canceled. Get value from attribute 'preOfferPostResult.finalRiskGroup'                                                                                                                                                                                                                                                                                                                                                                                |
| 40                           | DATE_APL_LAST_ACTIVE                        | APL_LAST_ACTIVE_DT                             | APL_LAST_ACTIVE_DT                   | Last activated date of client before ORBP time                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 41                           | NAME_PRE_FINAL_RISKGROUP                    | PRE_FINAL_RISKGROUP                            | PRE_FINAL_RISKGROUP                  | Define ACL WithDoc and NoDoc is Approved or Not , â€˜1â€™ is Approved, â€˜0â€™ is Rejected, like '2%' is Canceled. Get value from attribute 'preOfferPreResult.finalRiskGroup'                                                                                                                                                                                                                                                                                                                                                                                 |
| 42                           | TEXT_REGISTER_FINAL_RISKGROUP               | REGISTER_FINAL_RISKGROUP                       | REGISTER_FINAL_RISKGROUP             | Define ACL WithDoc and NoDoc is Approved or Not , â€˜1â€™ is Approved, â€˜0â€™ is Rejected, like '2%' is Canceled. Get value from attribute 'preOfferRegisterResult.finalRiskGroup'                                                                                                                                                                                                                                                                                                                                                                            |
| 43                           | CODE_APL_BOD0_SA                            | APL_BOD0_SA_CODE                               | APL_BOD0_SA_CODE                     | Define SA Code consult with BOD0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 44                           | ID_APL_BOD0_PROSPECT                        | APL_BOD0_PROSPECT_ID                           | APL_BOD0_PROSPECT_ID                 | Define prospect_id of CIC lead gen pilot that associates with each BOD0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 45                           | SKP_CLIENT                                  | SKP_CLIENT                                     | SKP_CLIENT                           | Client SKP                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 46                           | TEXT_CLI_CONTACT_REGION                     | CLI_CONTACT_REGION                             | CLI_CONTACT_REGION                   | Client contact region address get from last application info                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| 47                           | TEXT_OUTPUT_LIMIT_SUB_TYPE                  | OUTPUT_LIMIT_SUB_TYPE                          | OUTPUT_LIMIT_SUB_TYPE                | output limit sub type of recalculation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 48                           | TEXT_OUTPUT_LIMIT_TYPE                      | OUTPUT_LIMIT_TYPE                              | OUTPUT_LIMIT_TYPE                    | output limit type of recalculation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 49                           | CODE_OUTPUT_LIMIT_PILOT                     | OUTPUT_LIMIT_PILOT_CODE                        | OUTPUT_LIMIT_PILOT_CODE              | output limit pilot code of recalculation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| 50                           | NUM_APL_F_BOD0_BASE                         | APL_F_BOD0_BASE                                | APL_F_BOD0_BASE                      | Flag if BOD0 is consider as Based by UW                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 51                           | TEXT_TRIGGER_PRODUCT_PROFILE                | TRIGGER_PRODUCT_PROFILE                        | TRIGGER_PRODUCT_PROFILE              | Trigger product profile when BOD0 is auto trigger                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 52                           | TEXT_ORI_LIMIT_TYPE                         | ORI_LIMIT_TYPE                                 | ORI_LIMIT_TYPE                       | Input limit type of recalculation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 53                           | CODE_ORI_LIMIT_PILOT                        | ORI_LIMIT_PILOT_CODE                           | ORI_LIMIT_PILOT_CODE                 | Input limit pilot code of recalculation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 54                           | RATE_OUTPUT_MIN_DEPOSIT_LIMIT               | OUTPUT_MIN_DEPOSIT_LIMIT_RATE                  | OUTPUT_MIN_DEPOSIT_LIMIT_RATE        | Minimum deposit limit rate for TW 0BOD                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 55                           | TEXT_OUTPUT_SEGMENT                         | OUTPUT_SEGMENT                                 | OUTPUT_SEGMENT                       | Segment dormant 12 or Non Dormant 12                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 56                           | DTIME_APL_BOD0_END                          | APL_BOD0_END_DTM                               | APL_BOD0_END_DTM                     | the time system send the result of the approval process                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 57                           | TEXT_ORI_LIMIT_STATUS                       | ORI_LIMIT_STATUS                               | ORI_LIMIT_STATUS                     | Input Limit Status at recalculation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 58                           | NFLAG_APL_F_ACTIVE_BNPL                     | FLAG_APL_F_ACTIVE_BNPL                         | FLAG_APL_F_ACTIVE_BNPL               | Flag (1/0) if client has any BNPL active account                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |

Index:

</details>

<details>
  <summary>Logical Mapping</summary>

**Source tables in DWH:**
| <font color="black">#</font> | <font color="black">Schema</font> | <font color="black">Table/View</font>          | <font color="black">Purpose</font>                                                                                                                          |
|------------------------------|-----------------------------------|------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1                            | OWNER_DWH                         | F_SCORING_VECTOR_TT                            | Contain main information related to input and output of a recalculation. Design as a row base table. Detail explanation for this table can see in the notes |
| 2                            | OWNER_DWH                         | DC_SCORING_VECTOR_ATTRIBUTE                    | Lookup table using to know the name and full path of attributes appear in Vector table                                                                      |
| 3                            | OWNER_DWH                         | F_APPROVAL_PROCESS_HEAD_TT                     | Bridge table -  Using to find the related SKP_SCORING_APPLICATION for a SKF_APPROVAL_PROCESS_HEAD                                                           |
| 4                            | OWNER_DWH                         | DC_SCORING_APPLICATION                         | Bridge table -  Using to find the ID_REQUEST (Scoring Code) of a SKF_APPROVAL_PROCESS_HEAD. From this scoring code we can link to Limit table in OFS        |
| 5                            | OWNER_DWH                         | DC_CREDIT_CASE, DC_PRODUCT, DC_PRODUCT_PROFILE | Bridge table -  Using to get the trigger Product Profile when recalculation trigger by application approved/cancelled                                       |
| 6                            | OWNER_DWH                         | DC_SALESROOM, CL_BRAND                         | Bridge table -  Using to get information about brand of shop code which submit the ORBP                                                                     |

Vector Table: contains all scoring attributes for a scoring (ORBP) or a application. <br/> Number of attributes is unlimited so that this table is designed with 1 row is one attribute and corresponding value of this attribute for a ORBP/Application

Types of attributes in Vector: Can identify/classify based on attributes full path (with "[]" or not)
1. Array: Multiple results for a scoring
- 'applicantData.limitStore.limits[].limitID'
- 'outputData.onlineRBP.offers[].limitPilotCode'
...
**Note**:
Attribute with path 'applicantData' is considered as Input Information
Attribute with path 'outputData' is considered as Output Information
2. No Array:  single result for a scoring
- 'salesPoint.sellerplaceCode'
- 'sysdate'
- 'additionalData.applicationCode'
- 'credit.offerRecalculationType'

**Note:** In some cases, to simplify the transformation, we are using array attibutes as No Array attributes:
- 'persons[].cuid' -- Client ID in PIF
- 'salesPoints[].salesAssistants[].code', --Identify SA code consult of BOD0

To be able to build and maintain this ORBP table. We have to understand structure of Vector table, which was described below.
Table Name: OWNER_DWH.FT_SCORING_VECTOR_TT

| <font color="black">#</font> | <font color="black">Field Name</font> | <font color="black">Data Type</font> | <font color="black">Description</font>                                                                                                           |
|------------------------------|---------------------------------------|--------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------|
| 1                            | SKF_SCORING_VECTOR                    | NUMBER                               | Primary surrogate key.                                                                                                                           |
| 2                            | SKF_APPROVAL_PROCESS_HEAD             | NUMBER                               | Foreign key identifier to Approval process fact table (FT APPROVAL PROCESS HEAD TT). Reference to the process upon which was the vector created. |
| 3                            | SKP_APPLICATION                       | NUMBER                               | Foreign key identifier to Application dimension table (DCT APPLICATION).                                                                         |
| 4                            | SKP_CREDIT_CASE                       | NUMBER                               | Foreign key identifier to Credit Case dim table (DCT CREDIT CASE).                                                                               |
| 5                            | SKP_CREDIT_TYPE                       | NUMBER                               | Foreign key identifier to Credit Type code list (CLT CREDIT TYPE).                                                                               |
| 6                            | DATE_DECISION                         | DATE                                 | Date of the decision made from table FT Approval Process Head TT                                                                                 |
| 7                            | SKP_CLIENT                            | NUMBER                               | Foreign key from the Client dim table (DCT Client). Reference to a client.                                                                       |
| 8                            | SKP_SCORING_VECTOR_ATTRIBUTE          | NUMBER                               | Foreign key identifier to Vector Attribute dimension table (DCT SCORING VECTOR ATTRIBUTE).                                                       |
| 9                            | SKP_SCORING_VECTOR_RELATION           | NUMBER                               | Foreign key identifier to Vector Relation dimension table (DCT SCORING VECTOR RELATION).                                                         |
| 10                           | SKP_CONTRACT_SUPPLEMENT               | NUMBER                               | Foreign key identifier to Contract supplement dimension table (DCT_CONTRACT_SUPPLEMENT).                                                         |
| 11                           | TEXT_VALUE                            | VARCHAR2(4000)                       | Vector return value (character format).                                                                                                          |
| 12                           | DTIME_VALUE                           | DATE                                 | Vector return value (date format).                                                                                                               |
| 13                           | NUM_VALUE                             | NUMBER                               | Vector return value (number format).                                                                                                             |
| 14                           | NUM_GROUP_POSITION_1                  | NUMBER                               | Vector group position 1.                                                                                                                         |
| 15                           | NUM_GROUP_POSITION_2                  | NUMBER                               | Vector group position 2.                                                                                                                         |
| 16                           | NUM_GROUP_POSITION_3                  | NUMBER                               | Vector group position 3.                                                                                                                         |
| 17                           | DTIME_INSERTED                        | DATE                                 | Standard date and time the record was inserted into source system.                                                                               |
| 18                           | DTIME_MODIFIED                        | DATE                                 | Standard date and time the record was last modified in source system.                                                                            |
| 19                           | CNT_SCORING_VECTOR                    | NUMBER                               |                                                                                                                                                  |

Below is the summary about steps of transformation from source to target table
[ORBP step by step.drawio.pdf](/.attachments/ORBP%20step%20by%20step.drawio-54d10693-5930-4da6-8c1d-087c21c3ebe2.pdf)
![ORBP ETL.PNG](/.attachments/ORBP%20ETL-9367cd70-43aa-4fc4-82eb-1b282c28cbdd.PNG)
</details>

## [4. FT&#95;CRM&#95;APPLICATION](/2.-Local-Datamart)
<details>
  <summary>Table Description</summary>
- One row is one application created (cover all applications in any status) <br/>- Contain main information about application:  <br/> 1.Loan Type: CD/TW/CL/CC/HPL,... <br/>2.Datetime for each step (from application created until closed) <br/>3.Application Process: salesroom, BOD1/BOD2/sign channel, sign platform <br/>4.Financial parameters: Volume, Tenor, IR


Field Description

| <font color="black">#</font> | <font color="black">Table Field Name</font> | <font color="black">CRM View Field Name</font> | <font color="black">Data Type</font> | <font color="black">Field Description</font>                                                                                                                                                                                                                                                                                                                                                                                                             |
|-----------------------------:|---------------------------------------------|------------------------------------------------|--------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1                            | SKP_PROC_INSERTED                           | N/A                                            | INTEGER                              | Technical Column                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 2                            | SKP_PROC_UPDATED                            | N/A                                            | INTERGER                             | Technical Column                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 3                            | DTIME_INSERTED                              | N/A                                            | DATE                                 | Technical Column                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 4                            | DTIME_UPDATED                               | N/A                                            | DATE                                 | Technical Column                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 5                            | DATE_EFFECTIVE                              | N/A                                            | DATE                                 | Technical Column                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 6                            | SKP_CREDIT_CASE                             | SKP_CREDIT_CASE                                | NUMBER                               | Unique key of loan application (DC_CREDIT_CASE) - <font color="red">Table Primary key</font>                                                                                                                                                                                                                                                                                                                                                             |
| 7                            | SKP_APPLICATION                             | SKP_APPLICATION                                | NUMBER                               | Last Application ID (DC_APPLICATION) on Credit Case                                                                                                                                                                                                                                                                                                                                                                                                      |
| 8                            | SKP_CONTRACT                                | SKP_CONTRACT                                   | NUMBER                               | Contract ID                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 9                            | SKP_CLIENT                                  | SKP_CLIENT                                     | NUMBER                               | Client ID in DWH (DC_CLIENT)                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 10                           | ID_CUID                                     | ID_CUID                                        | NUMBER                               | Client unique ID from PIF                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 11                           | SKP_CREDIT_TYPE                             | SKP_CREDIT_TYPE                                | NUMBER                               | Credit Type ID (CL_CREDIT_TYPE)                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 12                           | SKP_CREDIT_STATUS                           | SKP_CREDIT_STATUS                              | NUMBER                               | Credit Status ID (CL_CREDIT_STATUS)                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 13                           | DATE_DECISION                               | DATE_DECISION                                  | DATE                                 | <font color="red">Partition key</font>. Date decision of Application                                                                                                                                                                                                                                                                                                                                                                                     |
| 14                           | DTIME_APL_BOD01                             | APL_BOD01_DTM                                  | DATE                                 | Application (BOD1) date. It is also called In Pre-process date                                                                                                                                                                                                                                                                                                                                                                                           |
| 15                           | DTIME_APL_BOD01_BOD02                       | APL_BOD01_BOD02_DTM                            | DATE                                 | Artifactual Column for In-Prepro (BOD1) date in case it is null, Min (APL_BOD1_DT, APL_BOD2_DT)                                                                                                                                                                                                                                                                                                                                                          |
| 16                           | DTIME_APL_BOD02                             | APL_BOD02_DTM                                  | DATE                                 | Application (BOD2) date. It is also called Process date                                                                                                                                                                                                                                                                                                                                                                                                  |
| 17                           | DTIME_APL_CANCEL                            | APL_CANCEL_DTM                                 | DATE                                 | Cancellation date                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 18                           | DTIME_APL_APPROVE                           | APL_APPROVE_DTM                                | DATE                                 | Application Approved Date (approved for BOD2)                                                                                                                                                                                                                                                                                                                                                                                                            |
| 19                           | DTIME_APL_REJECT                            | APL_REJECT_DTM                                 | DATE                                 | Rejection date                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| 20                           | DTIME_APL_SIGN                              | APL_SIGN_DTM                                   | DATE                                 | Signature date                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| 21                           | DATE_APL_PAYOUT                             | APL_PAYOUT_DT                                  | DATE                                 | Payout date (date technically disbursement)                                                                                                                                                                                                                                                                                                                                                                                                              |
| 22                           | DTIME_APL_ACTIVE                            | APL_ACTIVE_DTM                                 | DATE                                 | Activation date                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 23                           | DTIME_APL_PAIDOFF                           | APL_PAIDOFF_DTM                                | DATE                                 | Paid off date (>= 90 days of late payment, contract status will be changed to paidoff)                                                                                                                                                                                                                                                                                                                                                                   |
| 24                           | DTIME_APL_WRITTEN_OFF                       | APL_WRITTEN_OFF_DTM                            | DATE                                 | Written Off date (>= 360 day of late payment, contract status will be changed to written off)                                                                                                                                                                                                                                                                                                                                                            |
| 25                           | DTIME_APL_CLOSE                             | APL_CLOSE_DTM                                  | DATE                                 | Closure date                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 26                           | DATE_APL_EARLY_REPAYMENT                    | APL_EARLY_REPAYMENT_DT                         | DATE                                 | Early Repayment date of Contract                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 27                           | AMT_APL_VOL                                 | APL_VOL                                        | NUMBER                               | Total credit amount of the contract                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 28                           | AMT_APL_VOL_WOI                             | APL_VOL_WOI                                    | NUMBER                               | credit amount of the contract (exclude Insurance Amount)                                                                                                                                                                                                                                                                                                                                                                                                 |
| 29                           | CNT_APL_TENOR                               | APL_TENOR                                      | NUMBER                               | Number of instalments                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 30                           | AMT_APL_IR                                  | APL_IR                                         | NUMBER                               | Annual interest rate taken directly from DWH. Before 2018-07-19 it is a compounded IR. From 2018-07-19 it is nominal annual IR based on 365 days basis.                                                                                                                                                                                                                                                                                                  |
| 31                           | AMT_APL_IR_CALC                             | APL_IR_CALC                                    | NUMBER                               | Annual nominal interest calculated by formula from Finance. It is used for LTV calculations and reports. Before 2018-07-19 it is a nominal IR. From 2018-07-19 it is nominal on 360 days basis (SBV rule)                                                                                                                                                                                                                                                |
| 32                           | AMT_APL_ANNUITY                             | APL_ANNUITY                                    | NUMBER                               | Annuity amount. Total monthly payment                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 33                           | AMT_APL_ANNUITY_WO_FEE                      | APL_ANNUITY_WO_FEE                             | NUMBER                               | Annuity amount without fee                                                                                                                                                                                                                                                                                                                                                                                                                               |
| 34                           | CODE_APL_PROD_GR                            | APL_PROD_CODE_GR                               | VARCHAR2                             | Group of product code: CD/TW/CLX/CCX ect.                                                                                                                                                                                                                                                                                                                                                                                                                |
| 35                           | CODE_APL_PROD                               | APL_PROD_CODE                                  | VARCHAR2                             | Product code                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 36                           | CODE_APL_POS_PRICING_TYPE                   | APL_POS_PRICING_TYPE                           | VARCHAR2                             | Type of POS loan pricing (only for skp_credit_type = 1). It is calculated by formula from Finance and depends on period of date_decision. <br/>Values:<br/>S - standard;<br/>L - low;<br/>Z - zero IR                                                                                                                                                                                                                                                    |
| 37                           | CODE_APL_CLX_PROD_GR                        | APL_CLX_PROD_CODE_GR                           | VARCHAR2                             | CLX product group. Artificially done by CRM                                                                                                                                                                                                                                                                                                                                                                                                              |
| 38                           | NFLAG_APL_F_BOD1_BASE                       | APL_F_BOD1_BASE                                | NUMBER                               | Flag if BOD1 was sent to UW approval process, not cancel before approval                                                                                                                                                                                                                                                                                                                                                                                 |
| 39                           | NFLAG_APL_F_BOD1_APPROVE                    | APL_F_BOD1_APPROVE                             | NUMBER                               | Flag if BOD1 was approved by UW                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 40                           | NFLAG_APL_F_BOD2_BASE                       | APL_F_BOD2_BASE                                | NUMBER                               | Flag if BOD2 was sent to UW approval process, not cancel before approval                                                                                                                                                                                                                                                                                                                                                                                 |
| 41                           | NFLAG_APL_F_BOD2_APPROVE                    | APL_F_BOD2_APPROVE                             | NUMBER                               | Flag if BOD2 was approved by UW                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 42                           | NFLAG_APL_F_ESERVICE                        | APL_F_ESERVICE                                 | NUMBER                               | Flag of signed E-Service agreement linked to this contract: <br/> 0 - No linked signed E-Service agreement  <br/>1 - There is linked E-Service signed agreement <br/> null - Contract is not signed                                                                                                                                                                                                                                                      |
| 43                           | NFLAG_APL_F_NEW                             | APL_F_NEW                                      | VARCHAR2                             | Flag new to company client (based on 1st activated application of client): <br/>1: this is application has BOD01 date equal BOD01 date of the 1st activated application ever of client  (New) <br/>0: this is application has BOD01 date after BOD01 date of the 1st activated application ever of client (Existing) <br/>-1: this is the application has BOD01 date before BOD01 date of the 1st activated application ever of client (consider as New) |
| 44                           | NUM_APL_CONTRACT                            | APL_CONTRACT_NUM                               | VARCHAR2                             | Text Contract Number in BSL                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 45                           | TEXT_APL_BOD01_CHANNEL                      | APL_BOD01_CHANNEL                              | VARCHAR2                             | Channel of BOD1 creation, it is based on Salesroom created the application                                                                                                                                                                                                                                                                                                                                                                               |
| 46                           | TEXT_APL_BOD01_PROCESS                      | APL_BOD01_PROCESS                              | VARCHAR2                             | Defines by which process step BOD1 was done, logic based on salesroom and product code (MC or not MC)                                                                                                                                                                                                                                                                                                                                                    |
| 47                           | TEXT_APL_BOD02_CHANNEL                      | APL_BOD02_CHANNEL                              | VARCHAR2                             | Channel of BOD02 creation. It is based on User role of BOD2                                                                                                                                                                                                                                                                                                                                                                                              |
| 48                           | TEXT_APL_CONSULT_CHANNEL                    | APL_CONSULT_CHANNEL                            | VARCHAR2                             | Application consultant channel, It is based on User role of step arrange the application                                                                                                                                                                                                                                                                                                                                                                 |
| 49                           | TEXT_APL_DISBURS_CHANNEL                    | APL_DISBURS_CHANNEL                            | VARCHAR2                             | Disbursement channel (it is not 100% correct in fact, using other table (PCS) will be better                                                                                                                                                                                                                                                                                                                                                             |
| 50                           | TEXT_APL_FORM                               | APL_FORM                                       | VARCHAR2                             | Application form: long form/short form                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 51                           | TEXT_APL_PROD_NAME                          | APL_PROD_NAME                                  | VARCHAR2                             | Product name                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 52                           | TEXT_APL_SIGN_CHANNEL                       | APL_SIGN_CHANNEL                               | VARCHAR2                             | Channel of contract signature. (value SA/ESIGN) <br/> There are two cases: <br/> - SA: Client come to Pos to meet SA, SA generate the document (including also e-service agreement), after signed the e-service agreement, client can choose signed in paper, or sign online via web/app <br/> - ESIGN: Client signed online via web/app without SA involve                                                                                              |
| 53                           | TEXT_APL_SIGN_TECH                          | APL_SIGN_TECH                                  | VARCHAR2                             | Platform where contract signed                                                                                                                                                                                                                                                                                                                                                                                                                           |
| 54                           | SKP_EMPLOYEE_APL_BOD01                      | APL_BOD01_SKP_EMPLOYEE                         | NUMBER                               | In pre-process (BOD1) skp employee                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 55                           | SKP_EMPLOYEE_APL_BOD02                      | APL_BOD02_SKP_EMPLOYEE                         | NUMBER                               | Process (BOD2) skp employee                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 56                           | SKP_EMPLOYEE_APL_CANCEL                     | APL_CANCEL_SKP_EMPLOYEE                        | NUMBER                               | Cancellation skp employee                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 57                           | SKP_EMPLOYEE_APL_CONSULT                    | APL_CONSULT_SKP_EMPLOYEE                       | NUMBER                               | Arrange application skp employee                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 58                           | SKP_EMPLOYEE_APL_SIGN                       | APL_SIGN_SKP_EMPLOYEE                          | NUMBER                               | Sign skp employee                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 59                           | SKP_PRODUCT                                 | SKP_PRODUCT                                    | NUMBER                               | Product ID (DCT_PRODUCT)                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 60                           | SKP_PRODUCT_VARIANT                         | SKP_PRODUCT_VARIANT                            | NUMBER                               | Key to product variant                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 61                           | SKP_SALESROOM                               | SKP_SALESROOM                                  | NUMBER                               | BOD01 salesroom                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 62                           | SKP_SALESROOM_APPL_CREATED                  | SKP_SALESROOM_APPL_CREATED                     | NUMBER                               | If the contract is signed, it is the signed salesroom, otherwise it is BOD1 salesroom                                                                                                                                                                                                                                                                                                                                                                    |



Index:
| <font color="black">#</font> | <font color="black">Owner</font> | <font color="black">Index Name</font> | <font color="black"> Type</font> | <font color="black">Column</font> |
|-----------------------------:|----------------------------------|---------------------------------------|----------------------------------|-----------------------------------|
| 1                            | DM_CRM                           | PK_FT_CRM_APPL_CREDIT_CASE            | Unique                           | SKP_CREDIT_CASE                   |
| 2                            | DM_CRM                           | IDX_FT_CRM_APPL_ID_CUID               | Normal                           | ID_CUID                           |
| 3                            | DM_CRM                           | IDX_FT_CRM_APPL_SKP_CONTRACT          | Normal                           | SKP_CONTRACT                      |


</details>
<details>
  <summary>Logical Mapping</summary>
Main Source tables:

| <font color="black">#</font> | <font color="black">Schema</font> | <font color="black">Table/View</font>                                                                                         | <font color="black">Purpose</font>                                                                                     |
|------------------------------|-----------------------------------|-------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------|
| 1                            | OWNER_DWH                         | DC_CREDIT_CASE                                                                                                                | Contain application number, client id, product id and salesroom application created                                    |
| 2                            | OWNER_DWH                         | F_CREDIT_CASE_AD                                                                                                              | Contain datetime for each step during lifecycle of the application and user submit those steps                         |
| 3                            | OWNER_DWH                         | F_APPLICATION_BASE_TT                                                                                                         | Contain financial parameters of application                                                                            |
| 4                            | OWNER_DWH                         | F_CREDIT_EVENT_TT                                                                                                             | Using to get information about the user who prepare the document to sign the contract (can be employee or system user) |
| 5                            | OWNER_DWH                         | DC_CONTRACT_SERVICE_REQUEST                                                                                                   | Using to get information about contract early termination                                                              |
| 6                            | OWNER_DWH                         | FT_SCORING_VECTOR_TT                                                                                                          | Using to get information about application form: long form or short form                                               |
| 7                            | OWNER_DWH                         | DC_EMPLOYEE                                                                                                                   | Intermediate table to get employee information                                                                         |
| 8                            | OWNER_EXT                         | EXT_CRM_TLS_OPS                                                                                                               | Using check if the employee submit BOD2 is TLS or not                                                                  |
| 9                            | OWNER_EXT_LOCAL                   | EXT_CRM_TMP_SALES_NETWORK                                                                                                     | Using to map BOD2 channel/ Consult channel                                                                             |
| 10                           | DM_VCT                            | F_APPL_VCT_PRELIM1_TT,  <br/>F_APPL_VCT_PRELIM2_TT,  <br/>F_APPL_VCT_PRE_TT,  <br/>F_APPL_VCT_POST_TT,  <br/>F_APPL_VCT_HV_TT | Using to know the result for each phase of application approval (BOD1 base, BOD1 approved, BOD2 base, BOD2 approved)   |
| 11                           | OWNER_DWH_LOCAL                   | DC_HCO_CONTRACTS                                                                                                              | Using to get information about platform the contract was signed (GMA/CAPP/WEB)                                         |


</details>

## [5. FT&#95;CRM&#95;APPL&#95;2&#95;OFFER](/2.-Local-Datamart)
<details>
  <summary>Table Description</summary>

Table information:
- One row is one credit case and one product offer for this credit case
- ORBP key, Scoring Offer ID are also added (use to track the mapping among application, offer, oRBP)
Main Source tables:

| <font color="black">#</font> | <font color="black">Schema</font> | <font color="black">Table/View</font> | <font color="black">Purpose</font>                                                                                            |
|------------------------------|-----------------------------------|---------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|
| 1                            | OWNER_DWH                         | F_OFFER_AD                            | Contain direct link between Offer and Application and information about application use the alternative offer or normal offer |
| 2                            | OWNER_DWH                         | F_CREDIT_CASE_AD                      | Using to lookup date for each credit status of a credit case (will be used for credit case ranking for each product offer)    |
| 3                            | OWNER_DWH                         | F_APPLICATION_BASE_TT                 | Using to mapping credit case to application                                                                                   |
| 4                            | DM_CRM                            | FT_CRM_OFFER                          | Using to get information about product offer: ID_CA, ID_CA_OFF, DATE_CA_START, ID_CA_ORIG_OFFER                               |
| 5                            | DM_CRM                            | FT_CRM_ORBP                           | Using to get information about ORBP: SKF_APPROVAL_PROCESS_HEAD, DTIME_APL_BOD0                                                |

Table Fields:

| <font color="black">#</font> | <font color="black">Table Field Name</font> | <font color="black">CRM View Field Name</font> | <font color="black">Data Type</font> | <font color="black">Field Description</font>                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|-----------------------------:|---------------------------------------------|------------------------------------------------|--------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1                            | SKP_PROC_INSERTED                           | N/A                                            | INTEGER                              | Technical Column                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| 2                            | SKP_PROC_UPDATED                            | N/A                                            | INTEGER                              | Technical Column                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| 3                            | DTIME_INSERTED                              | N/A                                            | DATE                                 | Technical Column                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| 4                            | DTIME_UPDATED                               | N/A                                            | DATE                                 | Technical Column                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| 5                            | DATE_EFFECTIVE                              | N/A                                            | DATE                                 | Technical Column                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| 6                            | ID_CA                                       | CA_ID                                          | NUMBER(15)                           | Offer ID (Product Offer) generated by DWH (source field is SKP_STORE_OFFER in table OWNER_DWH.DC_Store_Offer)                                                                                                                                                                                                                                                                                                                                                                                                  |
| 7                            | ID_CA_OFF                                   | CA_OFF_ID                                      | VARCHAR2(36)                         | Offer ID  (Product Offer) in Offer Store (Source field is ID_SOURCE in table OWNER_DWH.DC_Store_Offer)                                                                                                                                                                                                                                                                                                                                                                                                         |
| 8                            | ID_CA_ORIG_OFFER                            | CA_ORIG_OFFER_ID                               | VARCHAR2(36)                         | ID of scoring offer which relevant to given Product Offer (if any) <br/>- If can find the Scoring offer connected directly to given Product Offer --> the value of this field will be Scoring offer ID <br/>- If can not find the Scoring offer connected directly to given Product Offer --> the value of this field will be the closest Scoring offer ID within 120 days before the time product offer created <br/>- If cannot find any scoring offer via above methods, the value will be Product Offer ID |
| 9                            | DATE_CA_START                               | CA_START_DT                                    | DATE                                 | Offer creation date in OFS (should be used when joins with TB_CRM_OFFER). <font color ="Red"> Table Partitioning key. <font color>                                                                                                                                                                                                                                                                                                                                                                             |
| 10                           | ID_CUID                                     | ID_CUID                                        | NUMBER(15)                           | Client ID from PIF                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 11                           | SKP_CLIENT                                  | SKP_CLIENT                                     | NUMBER(15)                           | Client ID from DWH (DWH generated, can link with table OWNER_DWH.DC_CLIENT                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 12                           | SKP_CREDIT_CASE                             | SKP_CREDIT_CASE                                | NUMBER(15)                           | Unique key of loan application (DWH generated, can link with OWNER_DWH.DC_CREDIT_CASE).  <font color ="Red">Table Primary key <font color>                                                                                                                                                                                                                                                                                                                                                                     |
| 13                           | DATE_DECISION                               | DATE_DECISION                                  | DATE                                 | Decision date of loan application (should be used when joins with TB_CRM_APPLICATION)                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 14                           | NUM_RK_ORIG_OFFER_BY_APL                    | RK_ORIG_OFFER_BY_APL                           | NUMBER(5)                            | Rank applications for a CA_ORIG_ID based on status of application: ACTIVE->SIGN->APPROVE->BOD02->BOD01                                                                                                                                                                                                                                                                                                                                                                                                         |
| 15                           | NUM_RK_APL_BY_CA_START_DT                   | RK_APL_BY_CA_START_DT                          | NUMBER(5)                            | Rank applications for a CA_OFF_ID based on status of application: ACTIVE->SIGN->APPROVE->BOD02->BOD01                                                                                                                                                                                                                                                                                                                                                                                                          |
| 16                           | SKF_APPROVAL_PROCESS_HEAD                   | SKF_APPROVAL_PROCESS_HEAD                      | NUMBER(15)                           | This is the ORBP key which generated the Online/Master Limit for this Product Offer                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 17                           | DTIME_APL_BOD0                              | APL_BOD0_DTM                                   | DATE                                 | Datetime of the ORBP which generated the Online/Master Limit for this Product Offer                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 18                           | SKP_OFFER_TYPE                              | SKP_OFFER_TYPE                                 | NUMBER(1)                            | Key link to table OWNER_DWH.CL_OFFER_TYPE, identify application from alternative offer or normal Offer <br/>1: Alternative offer <br/>2: Offer generated from Product Calculator                                                                                                                                                                                                                                                                                                                               |

Index:
| <font color="black">#</font> | <font color="black">Owner</font> | <font color="black">Index Name</font> | <font color="black"> Type</font> | <font color="black">Column</font> |
|-----------------------------:|----------------------------------|---------------------------------------|----------------------------------|-----------------------------------|
| 1                            | DM_CRM                           | PK_FT_APPL_2_OFFER                    | Unique                           | SKP_CREDIT_CASE                   |

</details>
<details>
  <summary>Logical Mapping</summary>

</details>

## [6. FT&#95;CRM&#95;CALL](/2.-Local-Datamart)
<details>
  <summary>Table Description</summary>

| <font color="black">#</font> | <font color="black">Table Field Name</font> | <font color="black">CRM View Field Name</font> | <font color="black">Data Type</font> | <font color="black">Field Description</font>                                                                                                                                                                             |
|-----------------------------:|---------------------------------------------|------------------------------------------------|--------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1                            | SKF_CRM_CALL                                | N/A                                            | INTEGER                              | The primary key of table                                                                                                                                                                                                 |
| 2                            | SKP_PROC_INSERTED                           | N/A                                            | INTEGER                              | Key of the process which inserted the record                                                                                                                                                                             |
| 3                            | SKP_PROC_UPDATED                            | N/A                                            | INTEGER                              | Key of the process which last updated the record                                                                                                                                                                         |
| 4                            | DTIME_INSERTED                              | N/A                                            | DATE                                 | Date when record was created                                                                                                                                                                                             |
| 5                            | DTIME_UPDATED                               | N/A                                            | DATE                                 | Date (and time) when record was updated for the last time                                                                                                                                                                |
| 6                            | DATE_EFFECTIVE                              | N/A                                            | DATE                                 | Date (and time) when record was updated for the last time                                                                                                                                                                |
| 7                            | SKP_CLIENT                                  | SKP_CLIENT                                     | NUMBER                               | Key client in DWH take from Genesys system                                                                                                                                                                               |
| 8                            | SKF_CALL                                    | SKF_CALL                                       | INTEGER                              | Key call in DWH OWNER_DWH.F_CALL_TT                                                                                                                                                                                      |
| 9                            | SKF_CALL_STEP                               | SKF_CALL_STEP                                  | NUMBER                               | Key for call step in DWH OWNER_DWH.F_CALL_STEP_TT                                                                                                                                                                        |
| 10                           | ID_CONNECTION                               | ID_CONNECTION                                  | VARCHAR2(16)                         | Identifier of the connection that is provided by the dialing system to external applications ~ Call ID                                                                                                                   |
| 11                           | DTIME_CALL_START                            | DTIME_CALL_START                               | DATE                                 | Time when the communication start                                                                                                                                                                                        |
| 12                           | DTIME_CALL_STEP_START                       | DTIME_CALL_STEP_START                          | DATE                                 | Date and time of the call step start                                                                                                                                                                                     |
| 13                           | DTIME_CALL_STEP_END                         | DTIME_CALL_STEP_END                            | DATE                                 | Date and time of the call step end                                                                                                                                                                                       |
| 14                           | TEXT_ADDRESS_SOURCE                         | TEXT_ADDRESS_SOURCE                            | VARCHAR2(35)                         | Number that initiated the interaction                                                                                                                                                                                    |
| 15                           | TEXT_ADDRESS_TARGET                         | TEXT_ADDRESS_TARGET                            | VARCHAR2(35)                         | Number that received the interaction                                                                                                                                                                                     |
| 16                           | ID_IL_COMMUNICATION                         | ID_IL_COMMUNICATION                            | VARCHAR2(10)                         | Key for call task from SAS                                                                                                                                                                                               |
| 17                           | CODE_RESPONSE_TRACKING                      | CODE_RESPONSE_TRACKING                         | VARCHAR2(15)                         | Unique value generated by Marketing Automation that is required to be returned with response data for appropriate attribution and tracking to a particular campaign cell package                                         |
| 18                           | NAME_CALL_QUEUE                             | NAME_CALL_QUEUE                                | VARCHAR2(45)                         | Name queue of call                                                                                                                                                                                                       |
| 19                           | ID_MEDIA_SERVER                             | TEXT_MEDIA_SERVER_ID                           | VARCHAR2(35)                         | ID of media server                                                                                                                                                                                                       |
| 20                           | FLAG_CALL_TERMINATED_OPERATOR               | FLAG_CALL_TERMINATED_OPERATOR                  | VARCHAR2(1)                          | Flag indicating whether the call was terminated by the operator                                                                                                                                                          |
| 21                           | NAME_CALL_TYPE                              | NAME_CALL_TYPE                                 | VARCHAR2(15)                         | Call type (Inbound/ Outbound)                                                                                                                                                                                            |
| 22                           | FLAG_MANUAL_CALL                            | FLAG_MANUAL_CALL                               | VARCHAR2(3)                          | Identifier of call is manual or not                                                                                                                                                                                      |
| 23                           | NAME_CALL_CAMPAIGN                          | NAME_CALL_CAMPAIGN                             | VARCHAR2(40)                         | Name campaign call from Genesis                                                                                                                                                                                          |
| 24                           | NAME_CALL_AGENT_GROUP                       | NAME_CALL_AGENT_GROUP                          | VARCHAR2(40)                         | Name call agent groups from Genesys                                                                                                                                                                                      |
| 25                           | TEXT_REMARKS                                | TEXT_REMARKS                                   | VARCHAR2(500)                        | Remark saved by agents                                                                                                                                                                                                   |
| 26                           | CODE_DISPOSITION                            | CODE_DISPOSITION                               | VARCHAR2(40)                         | Business call result from Genesys                                                                                                                                                                                        |
| 27                           | TEXT_CHANNEL                                | CHANNEL                                        | VARCHAR2(30)                         | Channel of Product associate with call                                                                                                                                                                                   |
| 28                           | ID_CUID_GEN                                 | ID_CUID_GEN                                    | NUMBER                               | ID_CUID from Genesys OWNER_DWH.F_CALL_STEP_TT                                                                                                                                                                            |
| 29                           | ID_CUID_SAS                                 | ID_CUID_SAS                                    | VARCHAR2(30)                         | ID_CUID from SAS table OWNER_DWH.F_SAS_CALL_RESULT_TT                                                                                                                                                                    |
| 30                           | ID_CUID_PHONE                               | ID_CUID_PHONE                                  | NUMBER                               | ID_CUID defined by phone DM_CRM.FT_CLIENT_CALL                                                                                                                                                                           |
| 31                           | ID_CUID                                     | ID_CUID                                        | NUMBER                               | ID_CUID artificial field taken from all sources                                                                                                                                                                          |
| 32                           | NAME_CALL_DIALING_MODE                      | NAME_CALL_DIALING_MODE                         | VARCHAR2(25)                         | Name Dialing Mode                                                                                                                                                                                                        |
| 33                           | NAME_CALL_RESULT_TYPE                       | NAME_CALL_RESULT_TYPE                          | VARCHAR2(30)                         | Name call result type (Abandoned/ Answer/ Answering Machine Detected ./ Busy/ Dropped On No Answer                                                                                                                       |
| 34                           | NAME_CALL_STEP_RESULT                       | NAME_CALL_STEP_RESULT                          | VARCHAR2(20)                         | Identifier of the result of the call step (completed / routed / abandoned                                                                                                                                                |
| 35                           | NAME_CALL_STEP_RESULT_REASON                | NAME_CALL_STEP_RESULT_REASON                   | VARCHAR2(25)                         | Identifier of the result reason (route on no answer / abandoned while ringing / routed to other / etc..)                                                                                                                 |
| 36                           | NAME_CALL_STEP_RESOURCE_ROLE                | NAME_CALL_STEP_RESOURCE_ROLE                   | VARCHAR2(25)                         | Identifier of the resource role (initiated / received / redirected to                                                                                                                                                    |
| 37                           | NAME_CALL_STEP_RESOURCE_TYPE                | NAME_CALL_STEP_RESOURCE_TYPE                   | VARCHAR2(25)                         | Identifier of the resource type (RoutingPoint/Other/Agent)                                                                                                                                                               |
| 38                           | NAME_CALL_STEP_RESOURCE_SUBTP               | NAME_CALL_STEP_RESOURCE_SUBTP                  | VARCHAR2(25)                         | Identifier of the resource subtype (Agent/ Extension/ ExternalRoutingPoint/ RoutingPoint/ TrunkGroup / etc.)                                                                                                             |
| 39                           | SKP_EMPLOYEE_CALL_STEP                      | SKP_EMPLOYEE_CALL_STEP                         | NUMBER                               | SKP_EMPLOYEE of Agent handle call                                                                                                                                                                                        |
| 40                           | USERNAME                                    | USERNAME                                       | VARCHAR2(30)                         | Username of TLS Operator handle call                                                                                                                                                                                     |
| 41                           | TEXT_TEAM                                   | TEAM                                           | VARCHAR2(40)                         | Team of TLS Operator handle name                                                                                                                                                                                         |
| 42                           | CODE_EMPLOYEE                               | CODE_EMPLOYEE                                  | VARCHAR2(15)                         | Code employee of TLS Operator handle call                                                                                                                                                                                |
| 43                           | NUM_CALL_STEP_ORDINAL                       | NUM_CALL_STEP_ORDINAL                          | NUMBER                               | Order number of the call step in a group of all call steps related to one call. Sorted by the call step time                                                                                                             |
| 44                           | FLAG_RESOURCE_CONNECTED_2_CUST              | FLAG_RESOURCE_CONNECTED_2_CUST                 | VARCHAR2(1)                          | Indicates whether the resource connected with a customer for this call step                                                                                                                                              |
| 45                           | FLAG_CUST_REL_INTERACTION                   | FLAG_CUST_REL_INTERACTION                      | VARCHAR2(1)                          | Indicates whether the IRF resource was offered a customer-related interaction. Includes internal interactions                                                                                                            |
| 46                           | NUM_CALL_STEP_DURATION                      | NUM_CALL_STEP_DURATION                         | NUMBER                               | Call step duration in seconds                                                                                                                                                                                            |
| 47                           | NUM_RINGING_DURATION                        | NUM_RINGING_DURATION                           | NUMBER                               | Ringing time in seconds                                                                                                                                                                                                  |
| 48                           | NUM_TALK_DURATION                           | NUM_TALK_DURATION                              | NUMBER                               | Talking time in seconds                                                                                                                                                                                                  |
| 49                           | NUM_HOLD_DURATION                           | NUM_HOLD_DURATION                              | NUMBER                               | Total time on hold in seconds                                                                                                                                                                                            |
| 50                           | NUM_AFTER_CALL_WORK_DURATION                | NUM_AFTER_CALL_WORK_DURATION                   | NUMBER                               | Time of work after the call in second                                                                                                                                                                                    |
| 51                           | NUM_ROUTING_POINT_DURATION                  | NUM_ROUTING_POINT_DURATION                     | NUMBER                               | The sum of the durations, in seconds, that this call step spent in routing point resources (for voice interactions) or in routing strategy resources (for multimedia interactions) prior to arriving at the IRF resource |
| 52                           | NUM_MEDIATION_DURATION                      | NUM_MEDIATION_DURATION                         | NUMBER                               | The elapsed time, in seconds, that the customer interaction spent in mediation (in queues, routing points, or non-self service IVRs) prior to reaching the receiving side that is represented by the call step row       |
| 53                           | NUM_WAITING_DURATION                        | NUM_WAITING_DURATION                           | NUMBER                               | Duration in second TLS Operator wait to receive the call excluding breaktime                                                                                                                                             |
| 54                           | NUM_WAITING_DIRECT_DURATION                 | NUM_WAITING_DIRECT_DURATION                    | NUMBER                               | Duration in second TLS Operator wait to receive the call excluding breaktime (different with NUM_WAITING_DURATION in case of the 1st call after breaktime)                                                               |
| 55                           | NUM_DIAL_DURATION                           | NUM_DIAL_DURATION                              | NUMBER                               | Dialing duration including ringing                                                                                                                                                                                       |
| 56                           | TEXT_NAME_CALL_LIST                         | TEXT_NAME_CALL_LIST                            | VARCHAR2(50)                         | Name call list from SAS                                                                                                                                                                                                  |
| 57                           | CODE_CALL_LIST_TYPE                         | CODE_CALL_LIST_TYPE                            | VARCHAR2(50)                         | Code call list from SAS                                                                                                                                                                                                  |
| 58                           | ID_CHANNEL                                  | ID_CHANNEL                                     | VARCHAR2(30)                         | ID_CHANNEL from OWNER_DWH.F_OUTPUT_LOAD_TT                                                                                                                                                                               |
| 59                           | ID_CA_OFF_OB                                | CA_OFF_ID_OB                                   | VARCHAR2(40)                         | Offer ID map by ID_IL_COMMUNICATION of call to OWNER_DWH.F_SAS_CLIENT_CONTACT_EXT_TT (just have info for Outbound Call)                                                                                                  |
| 60                           | ID_CA_OFF_MAP                               | CA_OFF_ID_MAP                                  | VARCHAR2(40)                         | Offer ID map by ID_CUID (take the nearest offer of client before the call) have info for all Inbound and Outbound call                                                                                                   |
| 61                           | ID_CA_OFF                                   | CA_OFF_ID                                      | VARCHAR2(40)                         | Combine the info of CA_OFF_ID_OB and CA_OFF_ID                                                                                                                                                                           |
| 62                           | NUM_PRIORITY                                | NUM_PRIORITY                                   | NUMBER                               | NUM_PRIORITY from OWNER_DWH.F_OUTPUT_LOAD_TT                                                                                                                                                                             |
| 63                           | DTIME_CALL_END                              | DTIME_CALL_END                                 | DATE                                 | Date and time when the communication end                                                                                                                                                                                 |
| 64                           | NUM_CALL_DURATION                           | NUM_CALL_DURATION                              | NUMBER                               | Total duration of call                                                                                                                                                                                                   |
| 65                           | TEXT_DISPOSITION_SUBCODE                    | TEXT_DISPOSITION_SUBCODE                       | VARCHAR2(40)                         | Business call sub result from Genesys                                                                                                                                                                                    |
| 66                           | DTIME_CREATED_CALL_TASK                     | DTIME_CREATED_CALL_TASK                        | DATE                                 | Date when Call task was created                                                                                                                                                                                          |
| 67                           | ID_CALL_RECORDING                           | ID_CALL_RECORDING                              | VARCHAR2(32)                         | Recording ID of call, using for search record in Genesys Recording System                                                                                                                                                |
| 68                           | NAME_RECORD_TYPE                            | RECORD_TYPE                                    | VARCHAR2(25)                         | Record type of the call list of the Outbound Call                                                                                                                                                                        |
| 69                           | NAME_CALL_LIST_GEN                          | NAME_CALL_LIST_GEN                             | VARCHAR2(60)                         | Name of call list from Genesys system                                                                                                                                                                                    |

Index:
| <font color="black">#</font> | <font color="black">Owner</font> | <font color="black">Index Name</font> | <font color="black"> Type</font> | <font color="black">Column</font> |
|-----------------------------:|----------------------------------|---------------------------------------|----------------------------------|-----------------------------------|
| 1                            | DM_CRM                           | PK_FT_CRM_CALL                        | Unique                           | SKF_CRM_CALL                      |
| 2                            | DM_CRM                           | UNQ_FT_CRM_CALL                       | Unique                           | SKF_CALL_STEP                     |

</details>

<details>
  <summary>Logical Mapping</summary>

</details>

## [7. FT&#95;DAILY&#95;TLS&#95;OPERATOR&#95;STATUS](/2.-Local-Datamart)
<details>
  <summary>Table Description</summary>

| <font color="black">#</font> | <font color="black">Table Field Name</font> | <font color="black">CRM View Field Name</font> | <font color="black">Data Type</font> | <font color="black">Field Description</font>                                               |
|-----------------------------:|---------------------------------------------|------------------------------------------------|--------------------------------------|--------------------------------------------------------------------------------------------|
| 1                            | SKP_PROC_INSERTED                           | N/A                                            | INTEGER                              | Key of the process which inserted the record                                               |
| 2                            | SKP_PROC_UPDATED                            | N/A                                            | INTEGER                              | Key of the process which last updated the record                                           |
| 3                            | DTIME_INSERTED                              | N/A                                            | DATE                                 | Date when record was created                                                               |
| 4                            | DTIME_UPDATED                               | N/A                                            | DATE                                 | Date (and time) when record was updated for the last time                                  |
| 5                            | DATE_EFFECTIVE                              | N/A                                            | DATE                                 | Date (and time) when record was updated for the last time                                  |
| 6                            | DATE_CALL                                   | WORKING_DATE                                   | DATE                                 | Call date                                                                                  |
| 7                            | TEXT_REP_MONTH                              | N/A                                            | VARCHAR2(30)                         | Call Month                                                                                 |
| 8                            | NAME_RESOURCE                               | RESOURCE_NAME                                  | VARCHAR2(255)                        | Username of TLS Operator                                                                   |
| 9                            | TEXT_CHANNEL                                | CHANNEL                                        | VARCHAR2(80)                         | Selling Channel of Operator                                                                |
| 10                           | TEXT_TEAM                                   | TEAM                                           | VARCHAR2(80)                         | Team of Operator                                                                           |
| 11                           | CNT_TOTAL_LOGIN_TIME                        | TOTAL_LOGIN_TIME                               | NUMBER                               | Total time operator login                                                                  |
| 12                           | CNT_BUSY_ACW                                | DUR_BUSY_ACW                                   | NUMBER                               | The time operator busy with after call work                                                |
| 13                           | CNT_BUSY_WORKING                            | DUR_BUSY_WORKING                               | NUMBER                               | The time operator busy                                                                     |
| 14                           | CNT_READY_TIME                              | DUR_READY_TIME                                 | NUMBER                               | The time operator is ready to receive calls                                                |
| 15                           | CNT_UNKNOWN                                 | DUR_UNKNOWN                                    | NUMBER                               | The time operator                                                                          |
| 16                           | CNT_NOTREADY                                | DUR_NRD                                        | NUMBER                               | The time operator is not ready to receive calls                                            |
| 17                           | CNT_NOT_READY_LUNCH                         | DUR_NRD_LUNCH                                  | NUMBER                               | The time operator is not ready with the reason LUNCH                                       |
| 18                           | CNT_NOT_READY_MEETING                       | DUR_NRD_MEETING                                | NUMBER                               | The time operator is not ready with the reason Meeting                                     |
| 19                           | CNT_NOT_READY_TRAINING                      | DUR_NRD_TRAINING                               | NUMBER                               | The time operator is not ready with the reason Training                                    |
| 20                           | CNT_NOT_READY_PERSONAL                      | DUR_NRD_PERSONAL                               | NUMBER                               | The time operator is not ready with the reason Personal                                    |
| 21                           | CNT_NOT_READY_REASONCODE                    | DUR_NRD_REASONCODE                             | NUMBER                               | The time operator is not ready with the reason ReasonCode                                  |
| 22                           | CNT_NOT_READY_MANUAL_OB                     | DUR_NRD_MANUAL_OB                              | NUMBER                               | The time operator is not ready to receive calls because operator is having manual outbound |
| 23                           | CNT_NOT_READY_UNDENTIFY                     | DUR_NRD_UNDENTIFY                              | NUMBER                               | The time operator is not ready with unidentified reason                                    |
| 24                           | DTIME_FIRST_CHANGE_STATUS                   | FIRST_CHANGE_STATUS_TIME                       | DATE                                 | Login time in the day                                                                      |
| 25                           | DTIME_LAST_CHANGE_STATUS                    | LAST_CHANGE_STATUS_TIME                        | DATE                                 | Log out time in the day                                                                    |
| 26                           | CNT_LOGIN                                   | CNT_LOGIN                                      | INTEGER                              | Number of login times of agent                                                             |
| 27                           | CNT_NRD_LUNCH_COUNT                         | CNT_NRD_LUNCH                                  | INTEGER                              | The number of lunch                                                                        |
| 28                           | CNT_NRD_MEETING_COUNT                       | CNT_NRD_MEETING                                | INTEGER                              | The number of meeting                                                                      |
| 29                           | CNT_NRD_TRAINING_COUNT                      | CNT_NRD_TRAINING                               | INTEGER                              | The number of training                                                                     |
| 30                           | CNT_NRD_PERSONAL_COUNT                      | CNT_NRD_PERSONAL                               | INTEGER                              | The number of personal times                                                               |
| 31                           | CNT_NRD_REASONCODE_COUNT                    | CNT_NRD_REASONCODE                             | INTEGER                              | The number of reason code                                                                  |
| 32                           | CNT_NRD_MANUAL_CALL_COUNT                   | CNT_NRD_MANUAL_CALL                            | INTEGER                              | The number of manual call busy time                                                        |
| 33                           | CNT_NRD_MANUAL_NOCALL_COUNT                 | CNT_NRD_MANUAL_NOCALL                          | INTEGER                              | The number of manual call but not busy time                                                |
| 34                           | NFLAG_CHECK_TALK                            | N/A                                            | INTEGER                              | Flag when operator talk time > 2hour/day                                                   |
| 35                           | CNT_FTE_ALL                                 | FTE                                            | NUMBER                               | Full time employee (Day)                                                                   |
| 36                           | CNT_PRED_CON_CALL                           | N/A                                            | NUMBER                               | Predicted SAS Outbound Calls                                                               |
| 37                           | CNT_PRED_TALKTIME                           | N/A                                            | NUMBER                               | Predictive SAS Outbound Talk time                                                          |
| 38                           | CNT_MANUAL_TALKTIME                         | N/A                                            | NUMBER                               | Manual Talk time                                                                           |
| 39                           | CNT_OB_TALKTIME                             | N/A                                            | NUMBER                               | Outbound Talk time                                                                         |
| 40                           | CNT_IB_TALKTIME                             | N/A                                            | NUMBER                               | Inbound Talk time                                                                          |
| 41                           | CNT_TOTAL_TALKTIME                          | N/A                                            | NUMBER                               | Total Talk time                                                                            |
| 42                           | CNT_CON_CALL                                | N/A                                            | NUMBER                               | Connected Calls                                                                            |


Index:
| <font color="black">#</font> | <font color="black">Owner</font> | <font color="black">Index Name</font> | <font color="black"> Type</font> | <font color="black">Column</font> |
|-----------------------------:|----------------------------------|---------------------------------------|----------------------------------|-----------------------------------|
| 1                            | DM_CRM                           | PK_FT_DAILY_TLS_OPERATOR_STATU        | Unique                           | NAME_RESOURCE, DATE_CALL          |

</details>

<details>
  <summary>Logical Mapping</summary>

</details>

## [8. FT&#95;CRM&#95;RISK&#95;FIGURE](/2.-Local-Datamart)
<details>
  <summary>Table Description</summary>

| <font color="black">#</font> | <font color="black">Table Field Name</font> | <font color="black">CRM View Field Name</font> | <font color="black">Data Type</font> | <font color="black">Field Description</font>                                        |
|-----------------------------:|---------------------------------------------|------------------------------------------------|--------------------------------------|-------------------------------------------------------------------------------------|
| 1                            | SKP_CREDIT_CASE                             | SKP_CREDIT_CASE                                | NUMBER                               | Credit case key - <font color="red">Table Primary key</font>                        |
| 2                            | DATE_DECISION                               | DATE_DECISION                                  | DATE                                 | Decision date                                                                       |
| 3                            | DATE_FIRST_DUE                              | DATE_FIRST_DUE                                 | DATE                                 | First due date of signed contract                                                   |
| 4                            | NUM_RI_CON_FPD5                             | RI_CON_FPD5                                    | NUMBER                               | 1 if Contract is already Past 5 Days from First Payment Due Date and not Paid       |
| 5                            | NUM_RI_CON_FPD5_BASE                        | RI_CON_FPD5_BASE                               | NUMBER                               | 1 if Contract is already Past 5 Days from First Payment Due Date                    |
| 6                            | NUM_RI_CON_FPD10                            | RI_CON_FPD10                                   | NUMBER                               | 1 if Contract is already Past 10 Days from First Payment Due Date and not Paid      |
| 7                            | NUM_RI_CON_FPD10_BASE                       | RI_CON_FPD10_BASE                              | NUMBER                               | 1 if Contract is already Past 10 Days from First Payment Due Date                   |
| 8                            | NUM_RI_CON_FPD30                            | RI_CON_FPD30                                   | NUMBER                               | 1 if Contract is already Past 30 Days from First Payment Due Date and not Paid yet  |
| 9                            | NUM_RI_CON_FPD30_BASE                       | RI_CON_FPD30_BASE                              | NUMBER                               | 1 if Contract is already Past 30 Days from First Payment Due Date                   |
| 10                           | NUM_RI_CON_FPD60                            | RI_CON_FPD60                                   | NUMBER                               | 1 if Contract is already Past 60 Days from First Payment Due Date and not Paid yet  |
| 11                           | NUM_RI_CON_FPD60_BASE                       | RI_CON_FPD60_BASE                              | NUMBER                               | 1 if Contract is already Past 60 Days from First Payment Due Date                   |
| 12                           | NUM_RI_CON_SPD10                            | RI_CON_SPD10                                   | NUMBER                               | 1 if Contract is already Past 10 Days from Second Payment Due Date and not Paid yet |
| 13                           | NUM_RI_CON_SPD10_BASE                       | RI_CON_SPD10_BASE                              | NUMBER                               | 1 if Contract is already Past 10 Days from Second Payment Due Date                  |
| 14                           | NUM_RI_CON_SPD30                            | RI_CON_SPD30                                   | NUMBER                               | 1 if Contract is already Past 30 Days from Second Payment Due Date and not Paid yet |
| 15                           | NUM_RI_CON_SPD30_BASE                       | RI_CON_SPD30_BASE                              | NUMBER                               | 1 if Contract is already Past 30 Days from Second Payment Due Date                  |
| 16                           | NUM_RI_CON_SPD60                            | RI_CON_SPD60                                   | NUMBER                               | 1 if Contract is already Past 60 Days from Second Payment Due Date and not Paid yet |
| 17                           | NUM_RI_CON_SPD60_BASE                       | RI_CON_SPD60_BASE                              | NUMBER                               | 1 if Contract is already Past 60 Days from Second Payment Due Date                  |
| 18                           | NUM_RI_CON_TPD10                            | RI_CON_TPD10                                   | NUMBER                               | 1 if Contract is already Past 10 Days from Third Payment Due Date and not Paid yet  |
| 19                           | NUM_RI_CON_TPD10_BASE                       | RI_CON_TPD10_BASE                              | NUMBER                               | 1 if Contract is already Past 10 Days from Third Payment Due Date                   |
| 20                           | NUM_RI_CON_TPD30                            | RI_CON_TPD30                                   | NUMBER                               | 1 if Contract is already Past 30 Days from Third Payment Due Date and not Paid yet  |
| 21                           | NUM_RI_CON_TPD30_BASE                       | RI_CON_TPD30_BASE                              | NUMBER                               | 1 if Contract is already Past 30 Days from Third Payment Due Date                   |
| 22                           | NUM_RI_CON_TPD60                            | RI_CON_TPD60                                   | NUMBER                               | 1 if Contract is already Past 60 Days from Third Payment Due Date and not Paid yet  |
| 23                           | NUM_RI_CON_TPD60_BASE                       | RI_CON_TPD60_BASE                              | NUMBER                               | 1 if Contract is already Past 60 Days from Third Payment Due Date                   |
| 24                           | NUM_RI_CON_FSTPD10                          | RI_CON_FSTPD10                                 | NUMBER                               | 1 if RI_CON_FPD10 = 1 or RI_CON_SPD10 = 1 or RI_CON_TPD10 = 1                       |
| 25                           | NUM_RI_CON_FSTPD10_BASE                     | RI_CON_FSTPD10_BASE                            | NUMBER                               | 1 if RI_CON_FPD10_BASE = 1 or RI_CON_SPD10_BASE = 1 or RI_CON_TPD10_BASE = 1        |
| 26                           | NUM_RI_CON_FSTPD30                          | RI_CON_FSTPD30                                 | NUMBER                               | 1 if RI_CON_FPD30 = 1 or RI_CON_SPD30 = 1 or RI_CON_TPD30 = 1                       |
| 27                           | NUM_RI_CON_FSTPD30_BASE                     | RI_CON_FSTPD30_BASE                            | NUMBER                               | 1 if RI_CON_FPD30_BASE = 1 or RI_CON_SPD30_BASE = 1 or RI_CON_TPD30_BASE = 1        |
| 28                           | NUM_RI_CON_FSTPD60                          | RI_CON_FSTPD60                                 | NUMBER                               | 1 if RI_CON_FPD60 = 1 or RI_CON_SPD60 = 1 or RI_CON_TPD60 = 1                       |
| 29                           | NUM_RI_CON_FSTPD60_BASE                     | RI_CON_FSTPD60_BASE                            | NUMBER                               | 1 if RI_CON_FPD60_BASE = 1 or RI_CON_SPD60_BASE = 1 or RI_CON_TPD60_BASE = 1        |

Index:

</details>

<details>
  <summary>Logical Mapping</summary>
Source table in DWH:

| <font color="black">#</font> | <font color="black">Schema</font> | <font color="black">Table Name</font> | <font color="black">Main Data Extract</font>                                        |
|-----------------------------:|-----------------------------------|---------------------------------------|-------------------------------------------------------------------------------------|
| 1                            | OWNER_DWH                         | F_CONTRACT_AGGR_RISK_AD               | Get Risk Attributes of Contract (Amount Receivable, Date Balance, Observal Flag)    |
| 2                            | OWNER_DWH                         | F_CONTRACT_AGGR_BALANCE_AD            | Get Balance Attributes of Contract (Fee, Interest, Principal, Penalty, Instalments) |

</details>

## [9. FT&#95;CRM&#95;INSURANCE](/2.-Local-Datamart)
<details>
  <summary>Table Description</summary>

| <font color="black">#</font> | <font color="black">Table Field Name</font> | <font color="black">CRM View Field Name</font> | <font color="black">Data Type</font> | <font color="black">Field Description</font>                                                                                                                                                                                       |
|-----------------------------:|---------------------------------------------|------------------------------------------------|--------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1                            | SKP_CREDIT_CASE                             | SKP_CREDIT_CASE                                | NUMBER                               | Credit case key - <font color="red">Table Primary key</font>                                                                                                                                                                       |
| 2                            | ID_CUID                                     | ID_CUID                                        | NUMBER                               | Client unique id from PIF                                                                                                                                                                                                          |
| 3                            | DATE_DECISION                               | DATE_DECISION                                  | DATE                                 | Date decision of application. partitioning key (before 2020 by years and half years, from 2020 by month)                                                                                                                           |
| 4                            | NUM_APL_PROD_CODE_GR                        | APL_PROD_CODE_GR                               | VARCHAR2(30)                         | Group of product code: CD/TW/CLX/CCX ect.                                                                                                                                                                                          | " |
| 5                            | NUM_APL_VOL                                 | APL_VOL                                        | NUMBER                               | Total credit amount of the contract                                                                                                                                                                                                |
| 6                            | NUM_APL_VOL_WOI                             | APL_VOL_WOI                                    | NUMBER                               | Net credit amount. principal amount of the granted loan. amount of money asked by client to finance the initial transaction. it does not include fees which should be added to principal (origination fee, insurance premium, etc) |
| 7                            | NUM_APL_TENOR                               | APL_TENOR                                      | NUMBER                               | Number of contract instalments                                                                                                                                                                                                     |
| 8                            | DTIME_APL_CANCEL                            | APL_CANCEL_DTM                                 | DATE                                 | Cancellation date                                                                                                                                                                                                                  |
| 9                            | DTIME_APL_SIGN                              | APL_SIGN_DTM                                   | DATE                                 | Signature date                                                                                                                                                                                                                     |
| 10                           | TEXT_BUSINESS_MODEL                         | BUSINESS_MODEL                                 | VARCHAR2(6)                          | ALDI or non-ALDI type of sellerplace                                                                                                                                                                                               |
| 11                           | FLAG_NOALDI                                 | FLAG_NOALDI                                    | NUMBER                               | Flag = 1 if non-ALDI                                                                                                                                                                                                               |
| 12                           | NUM_F_INS_CI                                | F_INS_CI                                       | NUMBER                               | Flag = 1 if critical illness insurance contract alongside the base contract is active, 0 otherwise                                                                                                                                 |
| 13                           | NUM_F_INS_HOCO                              | F_INS_HOCO                                     | NUMBER                               | Flag = 1 if any home content insurance contract alongside the base contract is active, 0 otherwise                                                                                                                                 |
| 14                           | NUM_F_INS_PPI                               | F_INS_PPI                                      | NUMBER                               | Flag = 1 if payment protection insurance contract alongside the base contract is active, 0 otherwise                                                                                                                               |
| 15                           | NUM_F_INS_ADLD                              | F_INS_ADLD                                     | NUMBER                               | Flag = 1 if accidental damage and liquid damage insurance contract alongside the base contract is active, 0 otherwise                                                                                                              |
| 16                           | NUM_F_INS_OTHERS                            | F_INS_OTHERS                                   | NUMBER                               | Flag = 1 if other insurance contract alongside the base contract is active, 0 otherwise                                                                                                                                            |
| 17                           | DATE_START_CI                               | START_DATE_CI                                  | DATE                                 | Date when the record of insurance contract CI was created                                                                                                                                                                          |
| 18                           | NUM_INS_STATUS_CI                           | INS_STATUS_CI                                  | NUMBER                               | Insurance CI status. Foreign key to CLT_INSURANCE_STATUS                                                                                                                                                                           |
| 19                           | DATE_CANCEL_CI                              | DATE_CANCEL_CI                                 | DATE                                 | Date when insurance CI is cancelled (due to main contract is cancelled or clients cancel insurance within 14 days since signing the loan contract)                                                                                 |
| 20                           | DATE_TERMINATE_CI                           | DATE_TERMINATE_CI                              | DATE                                 | Date when insurance CI is terminated                                                                                                                                                                                               |
| 21                           | DATE_EARLY_TERMINATE_CI                     | DATE_EARLY_TERMINATE_CI                        | DATE                                 | Date when insurance CI is early terminated (means client cancel the insurance service after signing the loan contract 14 days)                                                                                                     |
| 22                           | DATE_START_HOCO                             | START_DATE_HOCO                                | DATE                                 | Date when the record of insurance contract HOCO was created.                                                                                                                                                                       |
| 23                           | NUM_INS_STATUS_HOCO                         | INS_STATUS_HOCO                                | NUMBER                               | Insurance HOCO status. foreign key to CLT_INSURANCE_STATUS                                                                                                                                                                         |
| 24                           | DATE_CANCEL_HOCO                            | DATE_CANCEL_HOCO                               | DATE                                 | Date when insurance HOCO is cancelled (due to base contract is cancelled or clients cancel insurance within 14 days since signing the loan contract)                                                                               |
| 25                           | DATE_TERMINATE_HOCO                         | DATE_TERMINATE_HOCO                            | DATE                                 | Date when insurance HOCO is terminated                                                                                                                                                                                             |
| 26                           | DATE_EARLY_TERMINATE_HOCO                   | DATE_EARLY_TERMINATE_HOCO                      | DATE                                 | Date when insurance HOCO is early terminated (means client cancel the insurance service after signing the loan contract 14 days)                                                                                                   |
| 27                           | DATE_START_PPI                              | START_DATE_PPI                                 | DATE                                 | Date when the record of insurance contract PPI was created                                                                                                                                                                         |
| 28                           | NUM_INS_STATUS_PPI                          | INS_STATUS_PPI                                 | NUMBER                               | Insurance PPI status. Foreign key to CLT_INSURANCE_STATUS                                                                                                                                                                          |
| 29                           | DATE_CANCEL_PPI                             | DATE_CANCEL_PPI                                | DATE                                 | Date when insurance PPI is cancelled (due to base contract is cancelled or clients cancel insurance within 14 days since signing the loan contract)                                                                                |
| 30                           | DATE_TERMINATE_PPI                          | DATE_TERMINATE_PPI                             | DATE                                 | Date when insurance PPI is terminated                                                                                                                                                                                              |
| 31                           | DATE_EARLY_TERMINATE_PPI                    | DATE_EARLY_TERMINATE_PPI                       | DATE                                 | Date when insurance PPI is early terminated (means client cancel the insurance service after signing the loan contract 14 days)                                                                                                    |
| 32                           | DATE_START_ADLD                             | START_DATE_ADLD                                | DATE                                 | Date when the record of insurance contract ADLD was created.                                                                                                                                                                       |
| 33                           | NUM_INS_STATUS_ADLD                         | INS_STATUS_ADLD                                | NUMBER                               | Insurance ADLD status. Foreign key to CLT_INSURANCE_STATUS                                                                                                                                                                         |
| 34                           | DATE_CANCEL_ADLD                            | DATE_CANCEL_ADLD                               | DATE                                 | Date when insurance ADLD is cancelled (due to base contract is cancelled or clients cancel insurance within 14 days since signing the loan contract)                                                                               |
| 35                           | DATE_TERMINATE_ADLD                         | DATE_TERMINATE_ADLD                            | DATE                                 | Date when insurance ADLD is terminated                                                                                                                                                                                             |
| 36                           | DATE_EARLY_TERMINATE_ADLD                   | DATE_EARLY_TERMINATE_ADLD                      | DATE                                 | Date when insurance ADLD is early terminated (means client cancel the insurance service after signing the loan contract 14 days)                                                                                                   |
| 37                           | DATE_START_OTHERS                           | START_DATE_OTHERS                              | DATE                                 | Date when the record of other insurance contract was created.                                                                                                                                                                      |
| 38                           | NUM_INS_STATUS_OTHERS                       | INS_STATUS_OTHERS                              | NUMBER                               | Other insurance status. Foreign key to CLT_INSURANCE_STATUS                                                                                                                                                                        |
| 39                           | DATE_CANCEL_OTHERS                          | DATE_CANCEL_OTHERS                             | DATE                                 | Date when other insurance is cancelled (due to base contract is cancelled or clients cancel insurance within 14 days since signing the loan contract)                                                                              |
| 40                           | DATE_TERMINATE_OTHERS                       | DATE_TERMINATE_OTHERS                          | DATE                                 | Date when other insurance is terminated                                                                                                                                                                                            |
| 41                           | DATE_EARLY_TERMINATE_OTHERS                 | DATE_EARLY_TERMINATE_OTHERS                    | DATE                                 | Date when other insurance is early terminated (means clients cancel the insurance service after signing the loan contract 14 days)                                                                                                 |
| 42                           | AMT_INS_CI                                  | INS_AMT_CI                                     | NUMBER                               | Critical Illness insurance amount (final amount - means when there is cancellation/early termination, the amount will be updated)                                                                                                  |
| 43                           | AMT_INS_HOCO                                | INS_AMT_HOCO                                   | NUMBER                               | Home Content insurance amount (final amount - means when there is cancellation/early termination, the amount will be updated)                                                                                                      |
| 44                           | AMT_INS_PPI                                 | INS_AMT_PPI                                    | NUMBER                               | Payment Protection Insurance amount (final amount - means when there is cancellation/early termination, the amount will be updated)                                                                                                |
| 45                           | AMT_INS_ADLD                                | INS_AMT_ADLD                                   | NUMBER                               | Accidental Damage and Liquid Damage insurance amount  (final amount - means when there is cancellation/early termination, the amount will be updated)                                                                              |
| 46                           | AMT_INS_OTHERS                              | INS_AMT_OTHERS                                 | NUMBER                               | Other insurance amount (final amount - means when there is cancellation/early termination, the amount will be updated)                                                                                                             |
| 47                           | NUM_FIN_INITIAL_VOL_WT_INS                  | FIN_INITIAL_VOL_WT_INS                         | NUMBER                               | Loan amount only                                                                                                                                                                                                                   |
| 48                           | NUM_FIN_INITIAL_VOL_W_INS_CI                | FIN_INITIAL_VOL_W_INS_CI                       | NUMBER                               | Initial volume of contract with insurance CI (loan amount + CI amount)                                                                                                                                                             |
| 49                           | NUM_FIN_INITIAL_VOL_W_INS_HOCO              | FIN_INITIAL_VOL_W_INS_HOCO                     | NUMBER                               | Initial volume of contract with insurance HOCO (loan amount + HOCO amount)                                                                                                                                                         |
| 50                           | NUM_FIN_INITIAL_VOL_W_INS_PPI               | FIN_INITIAL_VOL_W_INS_PPI                      | NUMBER                               | Initial volume of contract with insurance PPI (loan amount + PPI amount)                                                                                                                                                           |
| 51                           | NUM_FIN_INITIAL_VOL_W_INS_ADLD              | FIN_INITIAL_VOL_W_INS_ADLD                     | NUMBER                               | Initial volume of contract with insurance ADLD (loan amount + PPI amount)                                                                                                                                                          |
| 52                           | NUM_FIN_INITIAL_VOL_W_INS_OTHS              | FIN_INITIAL_VOL_W_INS_OTHERS                   | NUMBER                               | Initial volume of contract with other insurance (loan amount + PPI amount)                                                                                                                                                         |
| 53                           | NUM_FIN_INITIAL_IP                          | FIN_INITIAL_IP                                 | NUMBER                               | Flag =1 if there is insurance (any type) at the application moment                                                                                                                                                                 |
| 54                           | NUM_FIN_INITIAL_IP_PPI                      | FIN_INITIAL_IP_PPI                             | NUMBER                               | Flag =1 if there is insurance PPI at the application moment                                                                                                                                                                        |
| 55                           | NUM_FIN_INITIAL_IP_CI                       | FIN_INITIAL_IP_CI                              | NUMBER                               | Flag =1 if there is insurance CI at the application moment                                                                                                                                                                         |
| 56                           | NUM_FIN_INITIAL_IP_HOCO                     | FIN_INITIAL_IP_HOCO                            | NUMBER                               | Flag =1 if there is insurance HOCO at the application moment                                                                                                                                                                       |
| 57                           | NUM_FIN_INITIAL_IP_ADLD                     | FIN_INITIAL_IP_ADLD                            | NUMBER                               | Flag =1 if there is insurance ADLD at the application moment                                                                                                                                                                       |
| 58                           | NUM_FIN_INITIAL_IP_OTHERS                   | FIN_INITIAL_IP_OTHERS                          | NUMBER                               | Flag =1 if there is other  insurance at the application moment                                                                                                                                                                     |
| 59                           | CNT_FIN_INITIAL_IP                          | FIN_INITIAL_IP_CNT                             | NUMBER                               | Number of insurance at the application moment                                                                                                                                                                                      |
| 60                           | TEXT_FIN_INITIAL_IP_CMB                     | FIN_INITIAL_IP_CMB                             | VARCHAR2(160)                        | Combine flag of insurance if available at the application moment                                                                                                                                                                   |
| 61                           | NUM_FIN_FINAL_IP_PPI                        | FIN_FINAL_IP_PPI                               | NUMBER                               | Flag =1 if there is insurance PPI at reporting date                                                                                                                                                                                |
| 62                           | NUM_FIN_FINAL_IP_CI                         | FIN_FINAL_IP_CI                                | NUMBER                               | Flag =1 if there is insurance CI at reporting date                                                                                                                                                                                 |
| 63                           | NUM_FIN_FINAL_IP_HOCO                       | FIN_FINAL_IP_HOCO                              | NUMBER                               | Flag =1 if there is insurance HOCO at reporting date                                                                                                                                                                               |
| 64                           | NUM_FIN_FINAL_IP_ADLD                       | FIN_FINAL_IP_ADLD                              | NUMBER                               | Flag =1 if there is insurance ADLD at reporting date                                                                                                                                                                               |
| 65                           | NUM_FIN_FINAL_IP_OTHERS                     | FIN_FINAL_IP_OTHERS                            | NUMBER                               | Flag =1 if there is other insurance at reporting date                                                                                                                                                                              |
| 66                           | NUM_FIN_FINAL_IP                            | FIN_FINAL_IP                                   | NUMBER                               | Flag =1 if there is insurance (any type) at the reporting date                                                                                                                                                                     |
| 67                           | CNT_FIN_FINAL_IP                            | FIN_FINAL_IP_CNT                               | NUMBER                               | Number of insurance contracts at the reporting date                                                                                                                                                                                |
| 68                           | TEXT_FIN_FINAL_IP_CMB                       | FIN_FINAL_IP_CMB                               | VARCHAR2(160)                        | Combining flag of insurance if available at the reporting date                                                                                                                                                                     |
| 69                           | NUM_INS_F_CANCEL                            | INS_F_CANCEL                                   | NUMBER                               | Flag = 1 if there is any insurance is cancelled                                                                                                                                                                                    |
| 70                           | NUM_INS_F_CANCEL_PPI                        | INS_F_CANCEL_PPI                               | NUMBER                               | Flag = 1 if there is insurance PPI is cancelled                                                                                                                                                                                    |
| 71                           | NUM_INS_F_CANCEL_CI                         | INS_F_CANCEL_CI                                | NUMBER                               | Flag = 1 if there is insurance CI is cancelled                                                                                                                                                                                     |
| 72                           | NUM_INS_F_CANCEL_HOCO                       | INS_F_CANCEL_HOCO                              | NUMBER                               | Flag = 1 if there is insurance HOCO is cancelled                                                                                                                                                                                   |
| 73                           | NUM_INS_F_CANCEL_ADLD                       | INS_F_CANCEL_ADLD                              | NUMBER                               | Flag = 1 if there is insurance ADLD is cancelled                                                                                                                                                                                   |
| 74                           | NUM_INS_F_CANCEL_OTHERS                     | INS_F_CANCEL_OTHERS                            | NUMBER                               | Flag = 1 if there is other insurance is cancelled                                                                                                                                                                                  |
| 75                           | CNT_INS_F_CANCEL                            | INS_F_CANCEL_CNT                               | NUMBER                               | Number of cancelled insurance contracts at the reporting date                                                                                                                                                                      |
| 76                           | TEXT_INS_F_CANCEL_CMB                       | INS_F_CANCEL_CMB                               | VARCHAR2(160)                        | Combining flag of cancelled insurance if available at the reporting date                                                                                                                                                           |
| 77                           | NUM_INS_DAY_BTW_SIGN_CANCEL                 | INS_DAY_BTW_SIGN_CANCEL                        | NUMBER                               | Number of dates between signing date and cancelling date (in priority order: PPI -> CI -> HOCO -> ADLD -> TWI , the first non-null value will be counted)                                                                          |
| 78                           | NUM_INS_DAY_BTW_SIGN_CAN_PPI                | INS_DAY_BTW_SIGN_CANCEL_PPI                    | NUMBER                               | Number of dates between signing date and cancelling date of insurance PPI                                                                                                                                                          |
| 79                           | NUM_INS_DAY_BTW_SIGN_CANCEL_CI              | INS_DAY_BTW_SIGN_CANCEL_CI                     | NUMBER                               | Number of dates between signing date and cancelling date of insurance CI                                                                                                                                                           |
| 80                           | NUM_INS_DAY_BTW_SIGN_CAN_HOCO               | INS_DAY_BTW_SIGN_CANCEL_HOCO                   | NUMBER                               | Number of dates between signing date and cancelling date of insurance HOCO                                                                                                                                                         |
| 81                           | NUM_INS_DAY_BTW_SIGN_CAN_ADLD               | INS_DAY_BTW_SIGN_CANCEL_ADLD                   | NUMBER                               | Number of dates between signing date and cancelling date of insurance ADLD                                                                                                                                                         |
| 82                           | NUM_INS_DAY_BTW_SIGN_CAN_OTHER              | INS_DAY_BTW_SIGN_CANCEL_OTHERS                 | NUMBER                               | Number of dates between signing date and cancelling date of other insurance                                                                                                                                                        |
| 83                           | NUM_INS_F_EARLY_TERMINATE                   | INS_F_EARLY_TERMINATE                          | NUMBER                               | Flag = 1 if there is any insurance is early terminated                                                                                                                                                                             |
| 84                           | NUM_INS_F_EARLY_TERMINATE_PPI               | INS_F_EARLY_TERMINATE_PPI                      | NUMBER                               | Flag = 1 if there is insurance PPI is early terminated                                                                                                                                                                             |
| 85                           | NUM_INS_F_EARLY_TERMINATE_CI                | INS_F_EARLY_TERMINATE_CI                       | NUMBER                               | Flag = 1 if there is insurance CI is early terminated                                                                                                                                                                              |
| 86                           | NUM_INS_F_EARLY_TERMINATE_HOCO              | INS_F_EARLY_TERMINATE_HOCO                     | NUMBER                               | Flag = 1 if there is insurance HOCO is early terminated                                                                                                                                                                            |
| 87                           | NUM_INS_F_EARLY_TERMINATE_ADLD              | INS_F_EARLY_TERMINATE_ADLD                     | NUMBER                               | Flag = 1 if there is insurance ADLD is early terminated                                                                                                                                                                            |
| 88                           | NUM_INS_F_EARLY_TERMINATE_OTHS              | INS_F_EARLY_TERMINATE_OTHERS                   | NUMBER                               | Flag = 1 if there is other insurance is early terminated                                                                                                                                                                           |
| 89                           | CNT_INS_F_EARLY_TERMINATE                   | INS_F_EARLY_TERMINATE_CNT                      | NUMBER                               | Number of early terminated insurance contracts at the reporting date                                                                                                                                                               |
| 90                           | TEXT_INS_F_EARLY_TERMINATE_CMB              | INS_F_EARLY_TERMINATE_CMB                      | VARCHAR2(160)                        | Combining flag of early terminated insurance if available at the reporting date                                                                                                                                                    |
| 91                           | NUM_APL_VOL_INS                             | APL_VOL_INS                                    | NUMBER                               | Total amount of insurance (final amount)                                                                                                                                                                                           |
| 92                           | AMT_INS_CI_ORIGINAL                         | INS_AMT_CI_ORIGINAL                            | NUMBER                               | Original amount of insurance CI                                                                                                                                                                                                    |
| 93                           | AMT_INS_HOCO_ORIGINAL                       | INS_AMT_HOCO_ORIGINAL                          | NUMBER                               | Original amount of insurance HOCO                                                                                                                                                                                                  |
| 94                           | AMT_INS_PPI_ORIGINAL                        | INS_AMT_PPI_ORIGINAL                           | NUMBER                               | Original amount of insurance PPI                                                                                                                                                                                                   |
| 95                           | AMT_INS_ADLD_ORIGINAL                       | INS_AMT_ADLD_ORIGINAL                          | NUMBER                               | Original amount of insurance ADLD                                                                                                                                                                                                  |
| 96                           | AMT_INS_OTHERS_ORIGINAL                     | INS_AMT_OTHERS_ORIGINAL                        | NUMBER                               | Original amount of other insurance                                                                                                                                                                                                 |
| 97                           | NUM_APL_VOL_INS_ORIGINAL                    | APL_VOL_INS_ORIGINAL                           | NUMBER                               | Total original amount of insurance                                                                                                                                                                                                 |
| 98                           | NUM_F_INS_TWI                               | F_INS_TWI                                      | NUMBER                               | Flag = 1 if two-wheel insurance contract alongside the base contract is active, 0 otherwise                                                                                                                                        |
| 99                           | DATE_START_TWI                              | START_DATE_TWI                                 | DATE                                 | Date when the record of insurance contract TWI was created.                                                                                                                                                                        |
| 100                          | NUM_INS_STATUS_TWI                          | INS_STATUS_TWI                                 | NUMBER                               | Insurance TWI status. foreign key to CLT_INSURANCE_STATUS                                                                                                                                                                          |
| 101                          | DATE_CANCEL_TWI                             | DATE_CANCEL_TWI                                | DATE                                 | Date when insurance TWI is cancelled (due to base contract is cancelled or clients cancel insurance within 14 days since signing the loan contract)                                                                                |
| 102                          | DATE_TERMINATE_TWI                          | DATE_TERMINATE_TWI                             | DATE                                 | Date when insurance TWI is terminated                                                                                                                                                                                              |
| 103                          | DATE_EARLY_TERMINATE_TWI                    | DATE_EARLY_TERMINATE_TWI                       | DATE                                 | Date when other insurance is early terminated (means clients cancel the insurance service after signing the loan contract 14 days)                                                                                                 |
| 104                          | AMT_INS_TWI_ORIGINAL                        | INS_AMT_TWI_ORIGINAL                           | NUMBER                               | Original amount of insurance TWI                                                                                                                                                                                                   |
| 105                          | AMT_INS_TWI                                 | INS_AMT_TWI                                    | NUMBER                               | Two wheel insurance amount (final amount - means when there is cancellation/early termination, the amount will be updated)                                                                                                         |
| 106                          | NUM_FIN_INITIAL_VOL_W_INS_TWI               | FIN_INITIAL_VOL_W_INS_TWI                      | NUMBER                               | Initial volume of contract with insurance TWI (loan amount + TWI amount)                                                                                                                                                           |
| 107                          | NUM_FIN_INITIAL_IP_TWI                      | FIN_INITIAL_IP_TWI                             | NUMBER                               | Flag =1 if there is insurance TWI at the application moment                                                                                                                                                                        |
| 108                          | NUM_FIN_FINAL_IP_TWI                        | FIN_FINAL_IP_TWI                               | NUMBER                               | Flag =1 if there is insurance TWI at reporting date                                                                                                                                                                                |
| 109                          | NUM_INS_F_CANCEL_TWI                        | INS_F_CANCEL_TWI                               | NUMBER                               | Flag = 1 if there is insurance TWI is cancelled                                                                                                                                                                                    |
| 110                          | NUM_INS_DAY_BTW_SIGN_CAN_TWI                | INS_DAY_BTW_SIGN_CANCEL_TWI                    | NUMBER                               | Number of dates between signing date and cancelling date of insurance TWI                                                                                                                                                          |
| 111                          | NUM_INS_F_EARLY_TERMINATE_TWI               | INS_F_EARLY_TERMINATE_TWI                      | NUMBER                               | Flag = 1 if there is insurance TWI is early terminated                                                                                                                                                                             |
| 112                          | CODE_SHOP                                   | SHOP_CODE                                      | VARCHAR2(10)                         | Shop code of salesroom                                                                                                                                                                                                             |
| 113                          | CODE_SERVICE_PPI                            | CODE_SERVICE_PPI                               | VARCHAR2(10)                         | Service code of insurance PPI                                                                                                                                                                                                      |
| 114                          | CODE_SERVICE_CI                             | CODE_SERVICE_CI                                | VARCHAR2(10)                         | Service code of insurance CI                                                                                                                                                                                                       |
| 115                          | CODE_SERVICE_HOCO                           | CODE_SERVICE_HOCO                              | VARCHAR2(10)                         | Service code of insurance HOCO                                                                                                                                                                                                     |
| 116                          | CODE_SERVICE_ADLD                           | CODE_SERVICE_ADLD                              | VARCHAR2(10)                         | Service code of insurance ADLD                                                                                                                                                                                                     |
| 117                          | CODE_SERVICE_TWI                            | CODE_SERVICE_TWI                               | VARCHAR2(10)                         | Service code of insurance TWI                                                                                                                                                                                                      |
| 118                          | CODE_SERVICE_OTHERS                         | CODE_SERVICE_OTHERS                            | VARCHAR2(10)                         | Service code of other insurance                                                                                                                                                                                                    |

Index:

</details>

<details>
  <summary>Logical Mapping</summary>
Source table in DWH:

| <font color="black">#</font> | <font color="black">Schema</font> | <font color="black">Table Name</font> | <font color="black">Main Data Extract</font>                                                   |
|-----------------------------:|-----------------------------------|---------------------------------------|------------------------------------------------------------------------------------------------|
| 1                            | OWNER_DWH                         | DC_INSURANCE                          | Get base data of an insurance contract (Contract Type, Service Status, Insurance Program)      |
| 2                            | OWNER_DWH                         | F_INSURANCE_AT                        | Get fact data about an insurance contract (Insured Goods, Insurance Premium, Insurance Period) |
</details>

## [10. FT&#95;CLIENT&#95;REFERENCE&#95;INFO](/2.-Local-Datamart)
<details>
  <summary>Table Description</summary>

| <font color="black">#</font> | <font color="black">Table Field Name</font> | <font color="black">CRM View Field Name</font> | <font color="black">Data Type</font> | <font color="black">Field Description</font>                                               |
|-----------------------------:|---------------------------------------------|------------------------------------------------|--------------------------------------|--------------------------------------------------------------------------------------------|
| 1                            | SKP_CREDIT_CASE                             | N/A                                            | INTEGER                              | Foreign key identifier to Credit Case dimension table - Unique key                         |
| 2                            | ID_CUID                                     | N/A                                            | INTEGER                              | Client universal ID                                                                        |
| 3                            | SKP_CLIENT                                  | N/A                                            | INTEGER                              | Primary key of DCT_Client                                                                  |
| 4                            | SKP_CREDIT_TYPE                             | N/A                                            | INTEGER                              | Type of credit case. This also represents type of related existing application or contract |
| 5                            | DATE_DECISION                               | N/A                                            | DATE                                 | Date decision                                                                              |
| 6                            | CLI_F_DRIVING_LICENSE                       | N/A                                            | NUMBER                               | Flag = 1 if the Client provides Driving License information                                |
| 7                            | CLI_F_FAMILY_BOOK                           | N/A                                            | NUMBER                               | Flag = 1 if the Client provides Family Book information                                    |
| 8                            | CLI_F_ID_CARD                               | N/A                                            | NUMBER                               | Flag = 1 if the Client provides ID Card information                                        |
| 9                            | CLI_F_12DIGIT_ID_CARD                       | N/A                                            | NUMBER                               | Flag = 1 if the Client provides new ID Card (with 12 digits) information                   |
| 10                           | CLI_MONTHS_OF_WORKING                       | N/A                                            | NUMBER                               | Number of working months                                                                   |
| 11                           | CLI_F_PRIMARY_MOBILE                        | N/A                                            | NUMBER                               | Flag = 1 if the Client provides Primary Phone Number                                       |
| 12                           | CLI_PRIMARY_MOBILE_VERIFY                   | N/A                                            | VARCHAR2(30)                         | Result of Primary Phone Number verification                                                |
| 13                           | CLI_F_SECONDARY_MOBILE                      | N/A                                            | NUMBER                               | Flag = 1 if the Client provides Secondary Phone Number                                     |
| 14                           | CLI_SECONDARY_MOBILE_VERIFY                 | N/A                                            | VARCHAR2(30)                         | Result of Secondary Phone Number verification                                              |
| 15                           | CLI_F_PRIMARY_EMAIL                         | N/A                                            | NUMBER                               | Flag = 1 if the Client provides Primary Email                                              |
| 16                           | CLI_CODE_PHOTO_TAKING_RESULT                | N/A                                            | VARCHAR2(30)                         | Result of Photo taking                                                                     |
| 17                           | CLI_F_REF_FATHER                            | N/A                                            | NUMBER                               | Flag = 1 if the Client provides His/ Her Father's Contact                                  |
| 18                           | CLI_F_REF_GR_MOTHER                         | N/A                                            | NUMBER                               | Flag = 1 if the Client provides His/ Her Grand Mother's Contact                            |
| 19                           | CLI_F_REF_SISTER                            | N/A                                            | NUMBER                               | Flag = 1 if the Client provides His/ Her Sister's Contact                                  |
| 20                           | CLI_F_REF_FRIEND                            | N/A                                            | NUMBER                               | Flag = 1 if the Client provides His/ Her Friend's Contact                                  |
| 21                           | CLI_F_REF_GR_FATHER                         | N/A                                            | NUMBER                               | Flag = 1 if the Client provides His/ Her Grand Father's Contact                            |
| 22                           | CLI_F_REF_OTHER                             | N/A                                            | NUMBER                               | Flag = 1 if the Client provides Other Relative's Contact                                   |
| 23                           | CLI_F_REF_HUSBAND                           | N/A                                            | NUMBER                               | Flag = 1 if the Client provides Her Husband's Contact                                      |
| 24                           | CLI_F_REF_PARTNER                           | N/A                                            | NUMBER                               | Flag = 1 if the Client provides His/ Her Partner's Contact                                 |
| 25                           | CLI_F_REF_BROTHER                           | N/A                                            | NUMBER                               | Flag = 1 if the Client provides His/ Her Brother's Contact                                 |
| 26                           | CLI_F_REF_COLLEAGUE                         | N/A                                            | NUMBER                               | Flag = 1 if the Client provides His/ Her Colleague's Contact                               |
| 27                           | CLI_F_REF_GUARDIAN                          | N/A                                            | NUMBER                               | Flag = 1 if the Client provides His/ Her Guardian's Contact                                |
| 28                           | CLI_F_REF_WIFE                              | N/A                                            | NUMBER                               | Flag = 1 if the Client provides His Wife's Contact                                         |
| 29                           | CLI_F_REF_MOTHER                            | N/A                                            | NUMBER                               | Flag = 1 if the Client provides His/ Her Mother's Contact                                  |

Index:

</details>

<details>
  <summary>Logical Mapping</summary>

</details>

# [III. ERD](/2.-Local-Datamart)

Standard Mapping flow from Scoring Limit -> Scoring Offer -> BOD0 -> Product Limit -> Product Offer -> Application
![image.png](/.attachments/image-702c6614-aa01-4835-a4a9-18dbc5f9b55c.png)

# [IV. Sample Script](/2.-Local-Datamart)
## [4.1 Map Scoring Limit - Scoring Offer](/2.-Local-Datamart)

### 4.1.1 From OWNER_DWH Source
``` sql
select lim.*
      ,offer.*
from   owner_dwh.f_store_offer_limit_ad lim
left   join OWNER_DWH.DC_Store_Offer offer
on     lim.SKF_STORE_OFFER_LIMIT = offer.SKF_STORE_OFFER_LIMIT
and    offer.DTIME_CREATED >= --DATE_FILTER -- Partition key for Offer
and    offer.CODE_OFFER_TYPE like 'SCORING%' -- Get Scoring Offer
where  1=1
and    lim.DTIME_LIMIT_VALID_TO >= --DATE_FILTER -- Partition key for Limit
and    lim.CODE_TYPE_LIMIT like 'SCORING%' -- Get Scoring Limit
;
```
### 4.1.2 From LDM Source
``` sql
select lim.*
      ,offer.*
from   owner_dwh.f_store_offer_limit_ad lim
left   join vw_tb_crm_offer offer
on     lim.ID_SOURCE = offer.CA_LIM_ID
and    offer.CA_START_DT >= --DATE_FILTER -- Partition key for Offer
and    offer.CA_OFFER_TYPE_CODE like 'SCORING%' -- Get Scoring Offer
where  1 = 1
and    lim.DTIME_LIMIT_VALID_TO >= --DATE_FILTER Partition key for Limit
and    lim.CODE_TYPE_LIMIT like 'SCORING%' -- Get Scoring Limit
;
```

## [4.2 Map Scoring Offer - BOD0](/2.-Local-Datamart)

``` sql
select t.CA_ID
      ,t.CA_OFF_ID
      ,t.SKP_CLIENT
      ,t.CA_START_DT
      ,max(case
             when o.CA_OFF_ID is not null then
              1
             else
              0
           end) as flag_has_orbp
from   vw_tb_crm_offer t
left   join vw_tb_crm_orbp o
on     t.CA_OFF_ID = o.CA_OFF_ID
and    o.APL_BOD0_DTM >= --DATE_FILTER -- Partition key for oRBP table
where  t.CA_OFFER_TYPE_CODE like 'SCORING%'
and    t.CA_START_DT >= --DATE_FILTER -- Partition key for Offer
group  by t.CA_ID
         ,t.CA_OFF_ID
         ,t.SKP_CLIENT
         ,t.CA_START_DT
;
```

## [4.3 Map BOD0 Approved - Online Limit - Product Offer - Application](/2.-Local-Datamart)

``` sql
select o.SKF_APPROVAL_PROCESS_HEAD
      ,o.SKP_CLIENT
      ,o.APL_BOD0_DTM
      ,lim.SKF_STORE_OFFER_LIMIT
      ,lim.DTIME_CREATED
      ,lim.CODE_RISK_GRADE
      ,offer.CA_OFF_ID
      ,offer.CA_START_DT
      ,offer.CA_CREATION_DTM
      ,a2o.SKP_CREDIT_CASE
      ,a.SKP_CREDIT_CASE
from   vw_tb_crm_orbp o
join   owner_dwh.f_store_offer_limit_ad lim
on     o.ID_LIMIT_BULK = lim.ID_LIMIT_BULK -- key connect from BOD0 Approved to Product Limit  
and    o.output_limit_type = lim.CODE_TYPE_LIMIT -- matching same product due to one BOD0 is calculate/approved for multiple product 
and    lim.DTIME_LIMIT_VALID_TO >= --DATE_FILTER Partition key for Limit
and    lim.CODE_SUB_TYPE_LIMIT = 'ONLINE' -- Get Online Limit
left   join vw_tb_crm_offer offer -- be aware that there is online limit without produt offer so cant use join and there is  online limit with multiple product offer due to some pilot
on     lim.ID_SOURCE = offer.CA_LIM_ID
and    offer.CA_START_DT >= --DATE_FILTER -- Partition key for Offer
and    offer.CA_OFFER_TYPE_CODE not like 'SCORING%' -- Get Product Offer
left   join vw_tb_crm_appl_2_offer a2o 
on     offer.CA_OFF_ID = a2o.CA_OFF_ID
and    a2o.CA_START_DT >= --DATE_FILTER -- Partition key for Application 2 Offer
and    a2o.RK_APL_BY_CA_START_DT = 1 -- One product offer can have multiple application so need rank to get the last application on product offer
left   join vw_tb_crm_appl a
on     a2o.SKP_CREDIT_CASE = a.SKP_CREDIT_CASE
and    a2o.DATE_DECISION = a.DATE_DECISION
and    a.DATE_DECISION >= --DATE_FILTER -- Partition key for Application
where  o.APL_F_BOD0_APPROVED = 1 -- Get Approved BOD0
and    o.APL_BOD0_DTM >= --DATE_FILTER -- Partition key for oRBP table
and    o.OUTPUT_LIMIT_SUB_TYPE = 'ONLINE'
;
```




















